(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{392:function(e,a,t){"use strict";t.r(a);var r=t(25),s=function(e){e.options.__data__block__={mermaid_382ee1e3:'graph LR\n\ndatahxl[data+hxl]\nlayouts[Layout options]\ndashboard["Dashboard (config)<br/><br/>(Layout, Data Sources, Selected Bites)"]\neditor[Editor]\nbites[Bites<br /><em>potential charts, maps etc</em>]\n\ndatahxl --suggester--\x3e bites\nbites --\x3e editor\nlayouts --\x3e editor\neditor --save--\x3e dashboard\n',mermaid_382ee1e7:'graph LR\n\ndata[data with hxl] --\x3e inferbites(("Iterate Recipes<br/>and see what<br/>matches"))\ninferbites --\x3e possmatches[List of potential bites]\npossmatches --no map info--\x3e done[Bite finished] \npossmatches --lat+lon--\x3e done\npossmatches --geo info--\x3e maplink(("Check pcodes<br/> and link<br/>map server url"))\nmaplink -.-> fuzzy((Fuzzy Matcher))\nfuzzy --\x3e done\nmaplink --\x3e done\nmaplink --error--\x3e nobite[No Bite]\n',mermaid_382ee204:'graph LR\n\ndata[data + syntax]\ndatahxl[data+hxl]\nlayouts[layout options]\ndashboard["Dashboard (config)"]\neditor[Editor]\nbites[Bites<br /><em>potential charts, maps etc</em>]\n\ndata --infer--\x3e datahxl\ndatahxl --suggester--\x3e bites\nbites --\x3e editor\nlayouts --\x3e editor\neditor --save--\x3e dashboard\n',mermaid_382ee220:'graph LR\n\nbites[Compiled Bites/Views]\nrenderer["Renderer<br/>(Layout + charting / mapping libs)"]\ndata[Data]\n\nsubgraph Dashboard Config\n  bitesconf[Bites/Views Config]\n  layoutconf[Layout Config]\nend\n\nbitecompiler[Bite/View Compiler]\nbitecompiler --\x3e bites\n\nbitesconf --\x3e bitecompiler\ndata --\x3e bitecompiler\n\nlayoutconf --\x3e renderer\nbites --\x3e renderer\n\nrenderer --\x3e dashboard[HTML Dashboard]\n'}},n=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"hdx-technical-architecture-for-quick-dashboards"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hdx-technical-architecture-for-quick-dashboards"}},[e._v("#")]),e._v(" HDX Technical Architecture for Quick Dashboards")]),e._v(" "),t("p",[e._v("Notes from analysis and discussion in 2018.")]),e._v(" "),t("h1",{attrs:{id:"concepts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#concepts"}},[e._v("#")]),e._v(" Concepts")]),e._v(" "),t("ul",[t("li",[e._v("Bite (View): a description of an individual chart / map / fact and its data (source)\n"),t("ul",[t("li",[e._v("bite (for Simon): title, desc, data (compiled), uniqueid, map join info")]),e._v(" "),t("li",[e._v("view (Data Package views): title, desc, data sources (on parent data package), transforms, …")]),e._v(" "),t("li",[e._v("compiled view: title, desc, data (compiled)")])])]),e._v(" "),t("li",[e._v("Data source:\n"),t("ul",[t("li",[e._v("Single HXL file (Currently, Simon’s approach requires that all the data is in a single table so there is always a single data source.)")]),e._v(" "),t("li",[e._v("Data Package(s)")])])]),e._v(" "),t("li",[e._v("Creator / Editor: creating and editing the dashboard (given the source datasets)")]),e._v(" "),t("li",[e._v("Renderer: given dashboard config render the dashboard")])]),e._v(" "),t("h1",{attrs:{id:"dashboard-creator"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dashboard-creator"}},[e._v("#")]),e._v(" Dashboard Creator")]),e._v(" "),t("Mermaid",{attrs:{id:"mermaid_382ee1e3",graph:e.$dataBlock.mermaid_382ee1e3}}),t("h2",{attrs:{id:"bite-generation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bite-generation"}},[e._v("#")]),e._v(" Bite generation")]),e._v(" "),t("Mermaid",{attrs:{id:"mermaid_382ee1e7",graph:e.$dataBlock.mermaid_382ee1e7}}),t("h2",{attrs:{id:"extending-to-non-hxl-data"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#extending-to-non-hxl-data"}},[e._v("#")]),e._v(" Extending to non-HXL data")]),e._v(" "),t("p",[e._v("It is easy to extend this to non-HXL data by using base HXL types and inference e.g.")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("date            => #date\ngeo             => #geo+lon\ngeo             => #geo+lat\nstring/category => #indicator\n")])])]),t("Mermaid",{attrs:{id:"mermaid_382ee204",graph:e.$dataBlock.mermaid_382ee204}}),t("h1",{attrs:{id:"dashboard-renderer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dashboard-renderer"}},[e._v("#")]),e._v(" Dashboard Renderer")]),e._v(" "),t("p",[e._v("Rendering the dashboard involves:")]),e._v(" "),t("Mermaid",{attrs:{id:"mermaid_382ee220",graph:e.$dataBlock.mermaid_382ee220}}),t("h2",{attrs:{id:"compiled-view-generation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#compiled-view-generation"}},[e._v("#")]),e._v(" Compiled View generation")]),e._v(" "),t("p",[e._v("See "),t("a",{attrs:{href:"https://docs.datahub.io/developers/views/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.datahub.io/developers/views/"),t("OutboundLink")],1)]),e._v(" "),t("hr"),e._v(" "),t("h1",{attrs:{id:"architecture-proposal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#architecture-proposal"}},[e._v("#")]),e._v(" Architecture Proposal")]),e._v(" "),t("ul",[t("li",[e._v("data loader library\n"),t("ul",[t("li",[e._v("File: rows, fields (rows, columns)")])])]),e._v(" "),t("li",[e._v("type inference (?)\n"),t("ul",[t("li",[e._v("syntax: table schema infer")]),e._v(" "),t("li",[e._v("semantics (not now)")])])]),e._v(" "),t("li",[e._v("data transform library (include hxl support)")]),e._v(" "),t("li",[e._v("suggester library")]),e._v(" "),t("li",[e._v("renderer library")])]),e._v(" "),t("p",[e._v("Interfaces / Objects")]),e._v(" "),t("ul",[t("li",[e._v("File")]),e._v(" "),t("li",[e._v("(Dataset)")]),e._v(" "),t("li",[e._v("Transform")]),e._v(" "),t("li",[e._v("Algorithm / Recipe")]),e._v(" "),t("li",[e._v("Bite / View")]),e._v(" "),t("li",[e._v("Ordered Set of Bites")]),e._v(" "),t("li",[e._v("Dashboard")])]),e._v(" "),t("h2",{attrs:{id:"file-and-dataset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file-and-dataset"}},[e._v("#")]),e._v(" File (and Dataset)")]),e._v(" "),t("p",[t("a",{attrs:{href:"http://okfnlabs.org/blog/2018/02/15/design-pattern-for-a-core-data-library.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://okfnlabs.org/blog/2018/02/15/design-pattern-for-a-core-data-library.html"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/datahq/data.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/datahq/data.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("File"),t("br"),e._v("\nrows"),t("br"),e._v("\ndescriptor"),t("br"),e._v("\nschema"),t("br"),e._v("\nschema")]),e._v(" "),t("h2",{attrs:{id:"recipe"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#recipe"}},[e._v("#")]),e._v(" Recipe")]),e._v(" "),t("div",{staticClass:"language-json= extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("{\n  'id':'chart0001',\n  'type':'chart',\n  'subType':'row',\n  'ingredients':[{'name':'what','tags':['#activity-code-id','#sector']}],\n  'criteria':['what > 4', 'what < 11'],\n  'variables': ['what', 'count()'],\n  'chart':'',\n  'title':'Count of {1}',\n'priority': 8,\n}\n")])])]),t("h2",{attrs:{id:"bite-compiled-view"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#bite-compiled-view"}},[e._v("#")]),e._v(" Bite / Compiled View")]),e._v(" "),t("div",{staticClass:"language-json= extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{  \n  bite: array [...data for chart...],  \n  id: string "...chart bite ID...",  \n  priority: number,  \n  subtype: string "...bite subtype - row, pie...",  \n  title: string "...title of bite...",  \n  type: string "...bite type...",  \n  uniqueID: string "...unique ID combining bite and data structure",  \n}  \n')])])]),t("p",[e._v("=>")]),e._v(" "),t("h2",{attrs:{id:"dashboard"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dashboard"}},[e._v("#")]),e._v(" Dashboard")]),e._v(" "),t("div",{staticClass:"language-json= extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{\n  "title":"",\n  "subtext":"",\n  "filtersOn":true,\n  "filters":[],\n  "headlinefigures":0,\n  "headlinefigurecharts":[\n  ],\n  "grid":"grid5",\n  "charts":[\t\t\t\t\n    {\n      "data":"https://proxy.hxlstandard.org/data.json?filter01=append&append-dataset01-01=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1FLLwP6nxERjo1xLygV7dn7DVQwQf0_5tIdzrX31HjBA%2Fedit%23gid%3D0&filter02=select&select-query02-01=%23status%3DFunctional&url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1R9zfMTk7SQB8VoEp4XK0xAWtlsQcHgEvYiswZsj9YA4%2Fedit%23gid%3D0",\n      "chartID":""\n    },      \n    {\n      "data":"https://proxy.hxlstandard.org/data.json?filter01=append&append-dataset01-01=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1FLLwP6nxERjo1xLygV7dn7DVQwQf0_5tIdzrX31HjBA%2Fedit%23gid%3D0&filter02=select&select-query02-01=%23status%3DFunctional&url=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2F1R9zfMTk7SQB8VoEp4XK0xAWtlsQcHgEvYiswZsj9YA4%2Fedit%23gid%3D0",\n      "chartID":""\n    }\n  ]\n}\n')])])]),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('var config = {\n  layout: 2x2 // in city-indicators dashboard is handcrafted in layout\n  widgets: [\n    {\n      elementId / data-id: ...\n      view: {\n        metadata: { title, sources: "World Bank"}\n        resources: rule for creating compiled list of resources. [ { datasetId: ..., resourceId: ..., transform: ...} ]\n        specType: \n        viewspec: \n      }\n    },\n    {\n    \n    },\n  ]\n  datasets: [\n    list of data package urls ...\n  ]\n}\n')])])]),t("p",[e._v("Simon’s example")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://simonbjohnson.github.io/hdx-iom-dtm/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://simonbjohnson.github.io/hdx-iom-dtm/"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language-javascript= extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{\n   // metadata for dashboard\n  "title":"IOM DTM Example",\n  "subtext":" ....",\n  "headlinefigures": 3,\n  "grid": "grid5", // user chosen layout for dashboard. Choice of 10 grids\n  "headlinefigurecharts": [ //widgets - headline widget\n    {\n      "data": "https://beta.proxy.hxlstandard.org/data/1d0a79/download/africa-dtm-baseline-assessments-topline.csv",\n      "chartID": "text0013/#country+name/1" // bite Id\n      // elementId: ... // implicit from order in grid ...\n    },\n    {\n      "data": "https://beta.proxy.hxlstandard.org/data/1d0a79/download/africa-dtm-baseline-assessments-topline.csv",\n      "chartID": "text0012/#affected+hh+idps/5"\n    },\n    {\n      "data": "https://beta.proxy.hxlstandard.org/data/1d0a79/download/africa-dtm-baseline-assessments-topline.csv",\n      "chartID":"text0012/#affected+idps+ind/6"\n    }\n  ],\n  "charts": [\t// chart widgets\t\t\t\n    {\n      "data": "https://beta.proxy.hxlstandard.org/data/1d0a79/download/africa-dtm-baseline-assessments-topline.csv",\n      "chartID": "map0002/#adm1+code/4/#affected+idps+ind/6",\n      "scale":"log"  // chart config ... \n    },\n    {\n      "data": "https://beta.proxy.hxlstandard.org/data/1d0a79/download/africa-dtm-baseline-assessments-topline.csv",\n      "chartID": "chart0009/#country+name/1/#affected+idps+ind/6",\n      "sort":"descending"\n    }\n  ]\n}\n')])])]),t("p",[e._v("Algorithm")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Extract the data references to a common list of datasets and fetch them")])]),e._v(" "),t("li",[t("p",[e._v("You generate compiled data via hxl.js plus own code transforming to final data for charting etc")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("function transformChart(rawSourceData (csv parsed), bite) => [ [ ...], [...]] - data for chart\n  \n  hxl.js\n  custom code\n  \nfunction transformMap\n\nfunction transformText ...\n")])])]),t("p",[t("a",{attrs:{href:"https://github.com/SimonbJohnson/hxlbites.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/SimonbJohnson/hxlbites.js"),t("OutboundLink")],1)]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/SimonbJohnson/hxlbites.js/blob/master/hxlBites.js#L957",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/SimonbJohnson/hxlbites.js/blob/master/hxlBites.js#L957"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("hb.reverse(bite) => compiled bite (see above) (data, chartConfig)\n")])])])]),e._v(" "),t("li",[t("p",[e._v("generate dashboard html and compute element ids in actual page element ids computed from grid setup")])]),e._v(" "),t("li",[t("p",[e._v("Now have a final dashboard config")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("widgets: [\n  {\n    data: [ [...], [...]]\n    widgetType: text, chart, map ...\n    elementId: // element to bind to ... \n  }\n]\n")])])])]),e._v(" "),t("li",[t("p",[e._v("Now use specific renderer libraries e.g. leaflet, plotly/chartist etc to render out into page")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/SimonbJohnson/hxldash/blob/master/js/site.js#L294",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/SimonbJohnson/hxldash/blob/master/js/site.js#L294"),t("OutboundLink")],1)])])]),e._v(" "),t("h3",{attrs:{id:"notes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#notes"}},[e._v("#")]),e._v(" Notes")]),e._v(" "),t("p",[e._v("“Source” version of dashboard with data uncompiled.")]),e._v(" "),t("p",[e._v("Compiled version of dashboard with final data inline …")]),e._v(" "),t("p",[e._v("hxl.js takes an array of arrays … and outputs array of arrays …")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("{\n  schema: [...]\n  data: [...]\n}\n")])])]),t("h1",{attrs:{id:"renderer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#renderer"}},[e._v("#")]),e._v(" Renderer")]),e._v(" "),t("ul",[t("li",[e._v("Renderer for the dashboard")]),e._v(" "),t("li",[e._v("Renderer for each widget")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("function createChart(bite, elementId) => svg in bite\n")])])]),t("h2",{attrs:{id:"charts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#charts"}},[e._v("#")]),e._v(" Charts")]),e._v(" "),t("ul",[t("li",[e._v("Data Package View => svg/png etc\n"),t("ul",[t("li",[e._v("plotly")]),e._v(" "),t("li",[e._v("vega (d3)")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/frictionlessdata/datapackage-render-js",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/frictionlessdata/datapackage-render-js"),t("OutboundLink")],1)])])]),e._v(" "),t("li",[e._v("chartist")]),e._v(" "),t("li",[e._v("react-charts")])]),e._v(" "),t("h2",{attrs:{id:"map"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#map"}},[e._v("#")]),e._v(" Map")]),e._v(" "),t("ul",[t("li",[e._v("Leaflet")]),e._v(" "),t("li",[e._v("react-leaflet")])]),e._v(" "),t("h2",{attrs:{id:"tables"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tables"}},[e._v("#")]),e._v(" Tables")]),e._v(" "),t("p",[e._v("…")])],1)}),[],!1,null,null,null);"function"==typeof s&&s(n);a.default=n.exports}}]);
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Data Factory Design | Datopian Tech</title>
    <meta name="generator" content="VuePress 1.7.0">
    
    <meta name="description" content="An overview of our technology">
    
    <link rel="preload" href="/assets/css/0.styles.d75de8d6.css" as="style"><link rel="preload" href="/assets/js/app.42cde258.js" as="script"><link rel="preload" href="/assets/js/3.fa4bc789.js" as="script"><link rel="preload" href="/assets/js/56.b267a606.js" as="script"><link rel="prefetch" href="/assets/js/10.638da2b7.js"><link rel="prefetch" href="/assets/js/11.17e0f31f.js"><link rel="prefetch" href="/assets/js/12.903532db.js"><link rel="prefetch" href="/assets/js/13.6eb9e3f2.js"><link rel="prefetch" href="/assets/js/14.321278ec.js"><link rel="prefetch" href="/assets/js/15.b6fc4d5c.js"><link rel="prefetch" href="/assets/js/16.b3caaad1.js"><link rel="prefetch" href="/assets/js/17.b381cf63.js"><link rel="prefetch" href="/assets/js/18.3ebc898b.js"><link rel="prefetch" href="/assets/js/19.69d5ac20.js"><link rel="prefetch" href="/assets/js/20.7083d06c.js"><link rel="prefetch" href="/assets/js/21.49fa9fe8.js"><link rel="prefetch" href="/assets/js/22.154f4b66.js"><link rel="prefetch" href="/assets/js/23.4dc144f6.js"><link rel="prefetch" href="/assets/js/24.cc815849.js"><link rel="prefetch" href="/assets/js/25.ce5ada67.js"><link rel="prefetch" href="/assets/js/26.7e80a33f.js"><link rel="prefetch" href="/assets/js/27.1f061470.js"><link rel="prefetch" href="/assets/js/28.e3d21bf6.js"><link rel="prefetch" href="/assets/js/29.e9308e5a.js"><link rel="prefetch" href="/assets/js/30.e8f78de6.js"><link rel="prefetch" href="/assets/js/31.c5df799c.js"><link rel="prefetch" href="/assets/js/32.5f629eb0.js"><link rel="prefetch" href="/assets/js/33.ec83f018.js"><link rel="prefetch" href="/assets/js/34.d32a8ecf.js"><link rel="prefetch" href="/assets/js/35.429d828a.js"><link rel="prefetch" href="/assets/js/36.738af169.js"><link rel="prefetch" href="/assets/js/37.f10f1292.js"><link rel="prefetch" href="/assets/js/38.ab6a3f07.js"><link rel="prefetch" href="/assets/js/39.21f0a5a9.js"><link rel="prefetch" href="/assets/js/4.87a98c1d.js"><link rel="prefetch" href="/assets/js/40.dba88d93.js"><link rel="prefetch" href="/assets/js/41.5659ab21.js"><link rel="prefetch" href="/assets/js/42.24077f70.js"><link rel="prefetch" href="/assets/js/43.735df8f3.js"><link rel="prefetch" href="/assets/js/44.d7f00d32.js"><link rel="prefetch" href="/assets/js/45.01aa22e7.js"><link rel="prefetch" href="/assets/js/46.95143001.js"><link rel="prefetch" href="/assets/js/47.af314171.js"><link rel="prefetch" href="/assets/js/48.79db91df.js"><link rel="prefetch" href="/assets/js/49.2bde88a9.js"><link rel="prefetch" href="/assets/js/5.9745c567.js"><link rel="prefetch" href="/assets/js/50.9129941e.js"><link rel="prefetch" href="/assets/js/51.b269d2ad.js"><link rel="prefetch" href="/assets/js/52.851ebdfd.js"><link rel="prefetch" href="/assets/js/53.c7f27608.js"><link rel="prefetch" href="/assets/js/54.fa00a9cd.js"><link rel="prefetch" href="/assets/js/55.b0f25fa3.js"><link rel="prefetch" href="/assets/js/57.d22c2b48.js"><link rel="prefetch" href="/assets/js/58.951d4e34.js"><link rel="prefetch" href="/assets/js/59.af3e6d1a.js"><link rel="prefetch" href="/assets/js/6.884850f8.js"><link rel="prefetch" href="/assets/js/60.1fcd2664.js"><link rel="prefetch" href="/assets/js/61.8eabe431.js"><link rel="prefetch" href="/assets/js/62.ae37d327.js"><link rel="prefetch" href="/assets/js/63.4909605b.js"><link rel="prefetch" href="/assets/js/64.54feb24c.js"><link rel="prefetch" href="/assets/js/65.78e5aadb.js"><link rel="prefetch" href="/assets/js/66.2744a185.js"><link rel="prefetch" href="/assets/js/67.0d982f82.js"><link rel="prefetch" href="/assets/js/68.26fc110b.js"><link rel="prefetch" href="/assets/js/69.80229dbf.js"><link rel="prefetch" href="/assets/js/7.7e8bc420.js"><link rel="prefetch" href="/assets/js/70.6dbe86bf.js"><link rel="prefetch" href="/assets/js/71.5ea64cfd.js"><link rel="prefetch" href="/assets/js/72.e6aa1f00.js"><link rel="prefetch" href="/assets/js/73.f3c75981.js"><link rel="prefetch" href="/assets/js/74.8e3e50e5.js"><link rel="prefetch" href="/assets/js/75.a999e369.js"><link rel="prefetch" href="/assets/js/76.43f17b74.js"><link rel="prefetch" href="/assets/js/77.bfeedf51.js"><link rel="prefetch" href="/assets/js/78.3a5c4169.js"><link rel="prefetch" href="/assets/js/79.4edb0ee4.js"><link rel="prefetch" href="/assets/js/8.822440c2.js"><link rel="prefetch" href="/assets/js/80.cbb762ac.js"><link rel="prefetch" href="/assets/js/81.4e58f07a.js"><link rel="prefetch" href="/assets/js/82.31ee1f4e.js"><link rel="prefetch" href="/assets/js/83.5dd63d5c.js"><link rel="prefetch" href="/assets/js/84.d25a09fe.js"><link rel="prefetch" href="/assets/js/85.3b60c237.js"><link rel="prefetch" href="/assets/js/9.63d821ea.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.62a8c583.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d75de8d6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Datopian Tech</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Features" class="dropdown-title"><span class="title">Features</span> <span class="arrow down"></span></button> <button type="button" aria-label="Features" class="mobile-dropdown-title"><span class="title">Features</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/" class="nav-link">
  Views
</a></li></ul></div></div> <a href="https://github.com/datopian/tech.datopian.com" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Features" class="dropdown-title"><span class="title">Features</span> <span class="arrow down"></span></button> <button type="button" aria-label="Features" class="mobile-dropdown-title"><span class="title">Features</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/" class="nav-link">
  Views
</a></li></ul></div></div> <a href="https://github.com/datopian/tech.datopian.com" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Data Factory Design</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/flows/design/#components" class="sidebar-link">Components</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/flows/design/#datastore-load-job-story" class="sidebar-link">DataStore Load job story</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/flows/design/#reporting-integration" class="sidebar-link">Reporting Integration</a></li></ul></li><li><a href="/flows/design/#aircan-api" class="sidebar-link">AirCan API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/flows/design/#ckan-integration-api" class="sidebar-link">CKAN integration API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/flows/design/#architecture" class="sidebar-link">Architecture</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/flows/design/#ui-in-dms" class="sidebar-link">UI in DMS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/flows/design/#ui-design" class="sidebar-link">UI Design</a></li></ul></li><li><a href="/flows/design/#appendix" class="sidebar-link">Appendix</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/flows/design/#notes-re-aircan-api" class="sidebar-link">Notes re AirCan API</a></li><li class="sidebar-sub-header"><a href="/flows/design/#google-cloud-composer" class="sidebar-link">Google Cloud Composer</a></li><li class="sidebar-sub-header"><a href="/flows/design/#airflow-best-practices" class="sidebar-link">AirFlow Best Practices</a></li><li class="sidebar-sub-header"><a href="/flows/design/#what-terminology-should-we-use" class="sidebar-link">What terminology should we use?</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="data-factory-design"><a href="#data-factory-design" class="header-anchor">#</a> Data Factory Design</h1> <p>Our Data Factory system is called AirCan. A Data Factory is a set of services/components to process and integrate data (coming from different sources). Plus patterns / methods for integrating with CKAN and the DataHub.</p> <h2 id="components"><a href="#components" class="header-anchor">#</a> Components</h2> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><h2 id="datastore-load-job-story"><a href="#datastore-load-job-story" class="header-anchor">#</a> DataStore Load job story</h2> <h3 id="reporting-integration"><a href="#reporting-integration" class="header-anchor">#</a> Reporting Integration</h3> <p>When I upload a file to CKAN and it is getting loaded to the datastore (automatically), I want to know if that succeeded or failed so that I can share with my users that the new data is available (or do something about the error).</p> <p>For a remote Airflow instance (let’s say on Google Composer), describe the DAG tasks and the process. i.e.</p> <ul><li>File upload on CKAN triggers the ckanext-aircan connector</li> <li>which makes API request to airflow on GCP and triggers a DAG with following parameters
<ul><li>A f11s resource orject including
<ul><li>the remote location of the CSV file and the reource ID</li> <li>The target resource id</li></ul></li> <li>An API key to use when loading to CKAN datastore</li> <li>[A callback url]</li></ul></li> <li>The DAG
<ul><li>deletes the datatore table</li> <li>if it exists, creates a new datastore table</li> <li>loads CSV from the specified location (inforation available on DAG parameters)</li> <li>converts the CSV to JSON. The output of the converted JSON file will be in a bucket on GCP.</li> <li>upserts the JSON data row by row into the CKAN DataStore via CKAN’s DataStore API
<ul><li>This is what we have now: invoke{“message”:“Created &lt;DagRun ckan_api_load_gcp @ 2020-07-14 13:04:43+00:00: manual__2020-07-14T13:04:43+00:00, externally triggered: True&gt;”} <code>/api/3/action/datastore_create</code> and passing the contents of the json file
<ul><li>OR using upsert with inserts (faster) NB: datapusher just pushes the whole thing into <code>datastore_create</code> so stick with that.</li></ul></li> <li>OR: if we are doing postgres copy we need direct access to postgres DB</li></ul></li> <li>… [tbd] notifies CKAN instance of this (?)</li></ul></li></ul> <p>Error Handling and other topics to consider</p> <ul><li>How can we let CKAN know something went wrong? Shall we create a way to notify a certain endpoint on ckannext-aircan connector?</li> <li>Shall we also implement a timeout on CKAN?</li> <li>What are we going to display in case of an error?</li> <li>The “tmp” bucket on GCP will eventually get full of files; shall we flush it? How do we know when it’s safe to delete a file?
<ul><li>Lots of ways up this mountain.</li></ul></li> <li>What do we do for large files?</li></ul> <h2 id="aircan-api"><a href="#aircan-api" class="header-anchor">#</a> AirCan API</h2> <p>AirCan is built on AirFlow so we have same basic API TODO: insert link</p> <p>However, we have standard message formats to pass to DAGs following these principles: All dataset and data resource objects should following the Frictionless specs</p> <p>Pseudo-code showing how we call the API:</p> <div class="language-python= extra-class"><pre class="language-text"><code>airflow.dag_run({
  &quot;conf&quot;: {
    &quot;resource&quot;: json.dumps({  # f11s resource object
        resource_id: ...
        path: ...
        schema: ...
    })
    &quot;ckan_api_key: ...
    &quot;ckan_api_endpoint&quot;: demo.ckan.org/api/
  }
})
</code></pre></div><p>See for latest, up to date version: <a href="https://github.com/datopian/ckanext-aircan/blob/master/ckanext/aircan_connector/action.py#L68" target="_blank" rel="noopener noreferrer">https://github.com/datopian/ckanext-aircan/blob/master/ckanext/aircan_connector/action.py#L68<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="ckan-integration-api"><a href="#ckan-integration-api" class="header-anchor">#</a> CKAN integration API</h2> <p>There is a new API as follows:</p> <p><code>http://ckan:5000/api/3/action/aircan_submit?dag_id=...&amp;dataset=...&amp;resource</code></p> <p>Also DAGs can get triggered on events … TODO: go look at Github actions and learn from it …</p> <h2 id="architecture"><a href="#architecture" class="header-anchor">#</a> Architecture</h2> <p>Other principles of architecture:</p> <ul><li>AirFlow tasks and DAGs should do very little themselves and should hand off to separate libraries. Why? To have better separation of concerns and <strong>testability</strong>. AirCan is reasonably cumbersome to test but an SDK is much more testable.
<ul><li>Thus AirFlow tasks are often just going to pass through arguments TODO: expand this with an example …</li></ul></li> <li>AirFlow DAG will have incoming data and config set in “global” config for the DAG and so available to every task …</li> <li>Tasks should be as decoupled as possible. Obviously there <em>is</em> some data and metadata passing between tasks and that should be done by writing those to a storage bucket. Metadata MUST be stored in f11s format.
<ul><li>See this interesting blog post (not scientific) about why the previous approach, with side effcts, is not very resilient in the long run of a project <a href="https://medium.com/@maximebeauchemin/functional-data-engineering-a-modern-paradigm-for-batch-data-processing-2327ec32c42a" target="_blank" rel="noopener noreferrer">https://medium.com/@maximebeauchemin/functional-data-engineering-a-modern-paradigm-for-batch-data-processing-2327ec32c42a<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>don’t pass data explicitly between tasks (rather it is passed implicitly via an expectation of where the data is stored …)</li> <li>tasks and flows should be re-runnable … (no side effects principle)</li></ul></li></ul> <p>Each task can write to this location:</p> <div class="language- extra-class"><pre class="language-text"><code>bucket/dagid/runid/taskid/resource.json
bucket/dagid/runid/taskid/dataset.json
bucket/dagid/runid/taskid/... # data files
</code></pre></div><h2 id="ui-in-dms"><a href="#ui-in-dms" class="header-anchor">#</a> UI in DMS</h2> <p>URL structure on a daaset</p> <div class="language- extra-class"><pre class="language-text"><code># xxx is a dataset
/@myorg/xxx/actions/
/@myorg/xxx/actions/runs/{id}
</code></pre></div><p>Main question: to display to user we need some way to log what jobs are associated with what datasets (and users) and perhaps their status</p> <ul><li>we want to keep factory relatively dumb (it does not know about datasets etc etc)</li> <li>in terms of capabilities we need a way to pass permissions into the data factory (you hand over the keys to your car)</li></ul> <p>Simplest approach:</p> <ul><li>MetaStore (CKAN metadata db) has Jobs table which have structure of <code>| id | factory_id | job_type | created | updated | dataset | resource | user | status | info |</code> (where info is json blob)
<ul><li>status = one of <code>WAITING | RUNNING | DONE | FAILED | CANCELLED</code>. If failed we should have stuff in info about that.</li> <li><code>job_type</code> = one of <code>HARVEST | LOAD | VALIDATE ...</code> it is there so we could have several different factory jobs in one db</li> <li><code>info</code>: likely stuff
<ul><li>run time</li> <li>error information (on failure)</li> <li>success information: what was outcome, where are outputs if any etc</li></ul></li></ul></li> <li>On creating a job in the factory, the factory returns a factory id. the metastore stores the factory id into a new job object along with dataset and user info …
<ul><li>Qu: why have id and factory_id separate? is there any situation where you have a job w/o a factory id?</li></ul></li> <li>Then on loading a job page in frontend you can poll the factory for info and status (if status is WAITING or RUNNING)
<ul><li>=&gt; do we need the <code>info</code> column on the job (it’s just a cache of this info)?
<ul><li>Ans: useful for jobs which are complete so we don’t keep polling the factory (esp if factory deletes stuff)</li></ul></li></ul></li> <li>Can list all jobs for a given dataset (or resource) with info about them</li></ul> <p>Qus:</p> <ul><li>For Data Factory what do I do with Runs that are stale etc - how do I know who they are associated with. Can I store metadata on my Runs like who requested it etc.</li></ul> <h3 id="ui-design"><a href="#ui-design" class="header-anchor">#</a> UI Design</h3> <p>Example from Github:</p> <p><img src="https://i.imgur.com/xnTRq5T.png" alt=""></p> <h2 id="appendix"><a href="#appendix" class="header-anchor">#</a> Appendix</h2> <h3 id="notes-re-aircan-api"><a href="#notes-re-aircan-api" class="header-anchor">#</a> Notes re AirCan API</h3> <p><a href="https://medium.com/@ptariche/interact-with-apache-airflows-experimental-api-3eba195f2947" target="_blank" rel="noopener noreferrer">https://medium.com/@ptariche/interact-with-apache-airflows-experimental-api-3eba195f2947<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- extra-class"><pre class="language-text"><code>{&quot;message&quot;:&quot;Created &lt;DagRun ckan_api_load_gcp @ 2020-07-14 13:04:43+00:00: manual__2020-07-14T13:04:43+00:00, externally triggered: True&gt;&quot;}

GET /api/experimental/dags/&lt;string:dag_id&gt;/dag_runs/&lt;string:execution_date&gt;

GET /api/experimental/dags/ckan_api_load_gcp/dag_runs/2020-07-14 13:04:43+00:00

https://b011229e45c662be6p-tp.appspot.com/api/experimental/dags/ckan_api_load_gcp/dag_runs/2020-07-14T13:04:43+00:00

Resp: `{&quot;state&quot;:&quot;failed&quot;}`
</code></pre></div><h3 id="google-cloud-composer"><a href="#google-cloud-composer" class="header-anchor">#</a> Google Cloud Composer</h3> <p>Google Cloud Composer is a hosted version of AirFlow on Google Cloud.</p> <h4 id="how-google-cloud-composer-differs-from-local-airflow"><a href="#how-google-cloud-composer-differs-from-local-airflow" class="header-anchor">#</a> How Google Cloud Composer differs from local AirFlow</h4> <ul><li>File handling: On GCP, all the file handling must become interaction with a bucket ~rufus: what about from a url online (but not a bucket)<br>
Specifying the csv resource location (on a local Airflow) must become sending a resource to a bucket (or just parsing it from the JSON body). When converting it to a JSON file, it must become an action of creating a file on a bucket.</li> <li>Authentication: TODO</li></ul> <h3 id="airflow-best-practices"><a href="#airflow-best-practices" class="header-anchor">#</a> AirFlow Best Practices</h3> <ul><li>Should you and how do you pass information between tasks?
<ul><li><a href="https://medium.com/datareply/airflow-lesser-known-tips-tricks-and-best-practises-cf4d4a90f8f" target="_blank" rel="noopener noreferrer">https://medium.com/datareply/airflow-lesser-known-tips-tricks-and-best-practises-cf4d4a90f8f<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://towardsdatascience.com/airflow-sharing-data-between-tasks-7bbaa27eeb1" target="_blank" rel="noopener noreferrer">https://towardsdatascience.com/airflow-sharing-data-between-tasks-7bbaa27eeb1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <h3 id="what-terminology-should-we-use"><a href="#what-terminology-should-we-use" class="header-anchor">#</a> What terminology should we use?</h3> <p>ANS: we use AirFlow terminology:</p> <ul><li>Task</li> <li>DAG</li> <li>DagRun</li></ul> <p>For internals what are the options?</p> <ul><li>Task or Processor or …</li> <li>DAG or Flow or Pipeline?</li></ul> <p>TODO: table summarizing options in AirFlow, Luigi, Apache Beam etc.</p> <h4 id="ui-terminology"><a href="#ui-terminology" class="header-anchor">#</a> UI Terminology</h4> <ul><li>Actions</li> <li>Workflows</li></ul> <p>Terminology options</p> <ul><li>Gitlab
<ul><li>Pipelines: you have</li> <li>Jobs (runs of those</li> <li>Schedules</li></ul></li> <li>Github
<ul><li>Workflows</li> <li>Runs</li> <li>(Schedules - not explicit)</li></ul></li> <li>Airflow
<ul><li>DAGs
<ul><li>Tasks</li></ul></li> <li>DAG Runs</li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/datopian/tech.datopian.com/edit/master/flows/design/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Modified:</span> <span class="time">2/26/2021, 9:10:09 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.42cde258.js" defer></script><script src="/assets/js/3.fa4bc789.js" defer></script><script src="/assets/js/56.b267a606.js" defer></script>
  </body>
</html>

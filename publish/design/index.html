<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Publish - Design | Datopian Tech</title>
    <meta name="generator" content="VuePress 1.7.0">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-XESJBM03F5"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-XESJBM03F5');</script>
    <meta name="description" content="An overview of our technology">
    
    <link rel="preload" href="/assets/css/0.styles.d75de8d6.css" as="style"><link rel="preload" href="/assets/js/app.93a22573.js" as="script"><link rel="preload" href="/assets/js/3.d799bd9e.js" as="script"><link rel="preload" href="/assets/js/76.d2919968.js" as="script"><link rel="prefetch" href="/assets/js/10.ee63a4d5.js"><link rel="prefetch" href="/assets/js/11.a32e4edd.js"><link rel="prefetch" href="/assets/js/12.903532db.js"><link rel="prefetch" href="/assets/js/13.6eb9e3f2.js"><link rel="prefetch" href="/assets/js/14.45800f2d.js"><link rel="prefetch" href="/assets/js/15.530f1caf.js"><link rel="prefetch" href="/assets/js/16.62885a4f.js"><link rel="prefetch" href="/assets/js/17.4aeeac21.js"><link rel="prefetch" href="/assets/js/18.f93ad47f.js"><link rel="prefetch" href="/assets/js/19.a032c75c.js"><link rel="prefetch" href="/assets/js/20.7083d06c.js"><link rel="prefetch" href="/assets/js/21.6121a03b.js"><link rel="prefetch" href="/assets/js/22.d97cbbbf.js"><link rel="prefetch" href="/assets/js/23.d585ec31.js"><link rel="prefetch" href="/assets/js/24.3492763a.js"><link rel="prefetch" href="/assets/js/25.292cc9ed.js"><link rel="prefetch" href="/assets/js/26.d8940581.js"><link rel="prefetch" href="/assets/js/27.3380ddab.js"><link rel="prefetch" href="/assets/js/28.bc68c583.js"><link rel="prefetch" href="/assets/js/29.a3d6e1a4.js"><link rel="prefetch" href="/assets/js/30.c8803030.js"><link rel="prefetch" href="/assets/js/31.1718b1cf.js"><link rel="prefetch" href="/assets/js/32.85c1f8c8.js"><link rel="prefetch" href="/assets/js/33.775e8747.js"><link rel="prefetch" href="/assets/js/34.7bf65bab.js"><link rel="prefetch" href="/assets/js/35.ff8f2794.js"><link rel="prefetch" href="/assets/js/36.58803d6c.js"><link rel="prefetch" href="/assets/js/37.9bdd4b37.js"><link rel="prefetch" href="/assets/js/38.c547b28b.js"><link rel="prefetch" href="/assets/js/39.77d62965.js"><link rel="prefetch" href="/assets/js/4.87a98c1d.js"><link rel="prefetch" href="/assets/js/40.48bcf0f8.js"><link rel="prefetch" href="/assets/js/41.a164c9a8.js"><link rel="prefetch" href="/assets/js/42.0c5da929.js"><link rel="prefetch" href="/assets/js/43.00555e36.js"><link rel="prefetch" href="/assets/js/44.82e56b55.js"><link rel="prefetch" href="/assets/js/45.7600f97c.js"><link rel="prefetch" href="/assets/js/46.892c30ca.js"><link rel="prefetch" href="/assets/js/47.d0d1233e.js"><link rel="prefetch" href="/assets/js/48.450f8328.js"><link rel="prefetch" href="/assets/js/49.81fbdcec.js"><link rel="prefetch" href="/assets/js/5.c7bb7cc8.js"><link rel="prefetch" href="/assets/js/50.d1687b22.js"><link rel="prefetch" href="/assets/js/51.b1f671f1.js"><link rel="prefetch" href="/assets/js/52.a3620ba7.js"><link rel="prefetch" href="/assets/js/53.964b2c84.js"><link rel="prefetch" href="/assets/js/54.b9c03422.js"><link rel="prefetch" href="/assets/js/55.986c66c3.js"><link rel="prefetch" href="/assets/js/56.e15d054b.js"><link rel="prefetch" href="/assets/js/57.3348d40a.js"><link rel="prefetch" href="/assets/js/58.52b28abc.js"><link rel="prefetch" href="/assets/js/59.af0431a1.js"><link rel="prefetch" href="/assets/js/6.3c2e490e.js"><link rel="prefetch" href="/assets/js/60.51603881.js"><link rel="prefetch" href="/assets/js/61.fb3710f9.js"><link rel="prefetch" href="/assets/js/62.ae37d327.js"><link rel="prefetch" href="/assets/js/63.4909605b.js"><link rel="prefetch" href="/assets/js/64.e4827efe.js"><link rel="prefetch" href="/assets/js/65.78e5aadb.js"><link rel="prefetch" href="/assets/js/66.70040c3d.js"><link rel="prefetch" href="/assets/js/67.b5e26c15.js"><link rel="prefetch" href="/assets/js/68.26fc110b.js"><link rel="prefetch" href="/assets/js/69.80229dbf.js"><link rel="prefetch" href="/assets/js/7.7e8bc420.js"><link rel="prefetch" href="/assets/js/70.6dbe86bf.js"><link rel="prefetch" href="/assets/js/71.5ea64cfd.js"><link rel="prefetch" href="/assets/js/72.e6aa1f00.js"><link rel="prefetch" href="/assets/js/73.e7ddc351.js"><link rel="prefetch" href="/assets/js/74.8e3e50e5.js"><link rel="prefetch" href="/assets/js/75.7b52f115.js"><link rel="prefetch" href="/assets/js/77.bfeedf51.js"><link rel="prefetch" href="/assets/js/78.3a5c4169.js"><link rel="prefetch" href="/assets/js/79.4edb0ee4.js"><link rel="prefetch" href="/assets/js/8.89ab08e5.js"><link rel="prefetch" href="/assets/js/80.e0fdf646.js"><link rel="prefetch" href="/assets/js/81.29925fa7.js"><link rel="prefetch" href="/assets/js/82.8f42a8ea.js"><link rel="prefetch" href="/assets/js/83.710601dd.js"><link rel="prefetch" href="/assets/js/84.296de3a8.js"><link rel="prefetch" href="/assets/js/85.3b60c237.js"><link rel="prefetch" href="/assets/js/9.4feba4ce.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.62a8c583.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d75de8d6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Datopian Tech</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Features" class="dropdown-title"><span class="title">Features</span> <span class="arrow down"></span></button> <button type="button" aria-label="Features" class="mobile-dropdown-title"><span class="title">Features</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/" class="nav-link">
  Views
</a></li></ul></div></div> <a href="https://github.com/datopian/tech.datopian.com" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Features" class="dropdown-title"><span class="title">Features</span> <span class="arrow down"></span></button> <button type="button" aria-label="Features" class="mobile-dropdown-title"><span class="title">Features</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/" class="nav-link">
  Views
</a></li></ul></div></div> <a href="https://github.com/datopian/tech.datopian.com" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Publish - Design</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/publish/design/#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/publish/design/#the-framework-approach" class="sidebar-link">The framework approach</a></li></ul></li><li><a href="/publish/design/#design" class="sidebar-link">Design</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/publish/design/#principles-and-remarks" class="sidebar-link">Principles and Remarks</a></li><li class="sidebar-sub-header"><a href="/publish/design/#technology" class="sidebar-link">Technology</a></li><li class="sidebar-sub-header"><a href="/publish/design/#architecture" class="sidebar-link">Architecture</a></li></ul></li><li><a href="/publish/design/#key-flows" class="sidebar-link">Key Flows</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/publish/design/#components" class="sidebar-link">Components</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/publish/design/#plan-of-work" class="sidebar-link">Plan of Work</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/publish/design/#design-research" class="sidebar-link">Design Research</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/publish/design/#uploading-library" class="sidebar-link">Uploading library</a></li></ul></li><li><a href="/publish/design/#previous-work" class="sidebar-link">Previous work</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/publish/design/#original-flow-for-datahub-data-cli-in-2016" class="sidebar-link">Original Flow for DataHub data cli in 2016</a></li></ul></li><li><a href="/publish/design/#appendix-integration-into-ckan-v2-flow" class="sidebar-link">Appendix: Integration into CKAN v2 Flow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/publish/design/#current-system" class="sidebar-link">Current system</a></li><li class="sidebar-sub-header"><a href="/publish/design/#new-system" class="sidebar-link">New system</a></li></ul></li><li><a href="/publish/design/#appendix-project-creation-flow-comparison" class="sidebar-link">Appendix: Project Creation Flow Comparison</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/publish/design/#github" class="sidebar-link">Github</a></li><li class="sidebar-sub-header"><a href="/publish/design/#gitlab" class="sidebar-link">Gitlab</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="publish-design"><a href="#publish-design" class="header-anchor">#</a> Publish - Design</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Design of a DMS publishing system, with a focus on CKAN v3 / DataHub.</p> <p>Goal: an elegant single page application (that is easy to reuse and customize) that takes you from choosing your data file to a data package. Aka ‚Äúa javascript app for turning a CSV into a data package‚Äù.</p> <p>This application would form the UI part of a ‚Äúmanual‚Äù user flow of importing a data file into a Data Portal.</p> <h3 id="the-framework-approach"><a href="#the-framework-approach" class="header-anchor">#</a> The framework approach</h3> <p>As a product, the Publish system should be thought of more as a framework than a single solution: a set of patterns, components and flows that can be composed together to build different applications and workflows.</p> <p>A given solution is created by composing together different components into an overall flow.</p> <p>This approach is is designed to be extensible so that new workflows and their requirements can be easily accommodated.</p> <h2 id="design"><a href="#design" class="header-anchor">#</a> Design</h2> <h3 id="principles-and-remarks"><a href="#principles-and-remarks" class="header-anchor">#</a> Principles and Remarks</h3> <ul><li>Simplicity: a focus on extraordinary, easy and elegant user experience</li> <li>Speed: not only responsiveness, but also speed to being ‚Äúdone‚Äù</li> <li>Tabular: focus on tabular data to start with</li> <li>Adaptable / Reusable: this system should be rapidly adaptable for other import flows
<ul><li>A copy-and-paste-able template that is then adapt with minor changes</li> <li>Over time this may evolve to something configurable</li></ul></li> <li>CKAN-compatible (?): (Longer term) e.g. be able to reuse ckanext-scheming config</li></ul> <h3 id="technology"><a href="#technology" class="header-anchor">#</a> Technology</h3> <ul><li>Build in Javascript as a SPA (single page application)</li> <li>Use React as the framework</li> <li>? Assume we can use NextJS as the SSR/SSG app</li> <li>Use Apollo local storage (rather than Redux) for state management</li></ul> <h3 id="architecture"><a href="#architecture" class="header-anchor">#</a> Architecture</h3> <ul><li>Each step in a flow is ‚Äúroughly‚Äù a react component</li> <li>Each component will pass information between itself and the central store / other components. Those structures that are related to Datasets and Resources wll follow Frictionless formats.</li> <li>Encapsulate interaction with backend in a library. Backend is CKAN MetaStore and Blob Storage access, raw Blob Storage itself (almost certainly cloud)</li> <li>Split UI into clear components and even sub-applications (for example, a sub-application for resource adding)</li> <li>Use <a href="https://f11s.com/" target="_blank" rel="noopener noreferrer">Frictioness specs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for structuring storage of data objects such as Dataset, Resource, Table Schema etc will be in</li> <li>The specification of these formats themselves will be done in JSON schema and JSON Schema is what we use for specifying  new metadata profiles (usually extensions or customizations of the base Frictionless ones)</li> <li>Data schemas are described using Table Schema (for tabular data) or JSON Schema.</li></ul> <p>Diagram: SDK library encapsulates interaction with backend</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><p>Working assumptions</p> <ul><li>Permissions is ‚Äúoutside‚Äù of the UI: we can assume that UI is only launched for people with relevant permissions and that permissions are ultimately enforced in the backend (i.e. if someone attempts to save a dataset they don‚Äôt have permission for that will fail in the call to the backend). =&gt; we don‚Äôt need to show/hide/restrict based on permissions.</li></ul> <h2 id="key-flows"><a href="#key-flows" class="header-anchor">#</a> Key Flows</h2> <ul><li><strong>Ultra-simple resource(s) publishing</strong>: Publish/share a resource (file) <em>fast</em> to a new project (and dataset) - ultra-simple version (like adding a file to Drive or DropBox)
<ul><li>Implicitly creates a project and dataset</li></ul></li> <li><strong>Publish resource(s) and make a dataset</strong> Publish a file and create the dataset explicitly (ie. add title, license etc)</li> <li><strong>Add resource(s) to a dataset</strong>: a new resource to an existing dataset
<ul><li>Add multiple resources at once</li></ul></li> <li>Edit the metadata of an existing dataset</li></ul> <p>Qu:</p> <ul><li>Do we even permit the super simple option - it‚Äôs attractive but it brings some complexity in the UI<br>
(either we need to make user provide project/dataset level metadata at end or we guess it for them and guessing usually goes wrong). Note that Github makes you create the ‚Äúproject‚Äù and its repo before you can push anything.</li></ul> <h2 id="components"><a href="#components" class="header-anchor">#</a> Components</h2> <p>UI</p> <ul><li>File uploader</li> <li>Resource</li></ul> <p>SDK</p> <ul><li>File upload</li> <li>MetaStore
<ul><li>(Project creation / updating)</li> <li>Dataset creation / updating</li></ul></li> <li>‚Ä¶</li></ul> <h2 id="plan-of-work"><a href="#plan-of-work" class="header-anchor">#</a> Plan of Work</h2> <p>Task brainstorm</p> <ul><li></li></ul> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><h2 id="design-research"><a href="#design-research" class="header-anchor">#</a> Design Research</h2> <h3 id="uploading-library"><a href="#uploading-library" class="header-anchor">#</a> Uploading library</h3> <p>Atm we implement from ‚Äúscratch‚Äù. Could we use an ‚Äúoff the shelf‚Äù solution e.g. uppy</p> <p>Impressions of uppy:</p> <ul><li>Good support</li> <li>Open-source MIT</li> <li>Beautiful design</li> <li>Customizable</li> <li>Support (dropbox, google drive, AWS S3, Tus, XHR)</li></ul> <p>Question:</p> <ul><li>how to implement uppy + CKAN SDK?</li> <li>support for azure <a href="https://github.com/transloadit/uppy/issues/1591" target="_blank" rel="noopener noreferrer">https://github.com/transloadit/uppy/issues/1591<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (seems like it can work but maybe issue with large files (?))</li></ul> <h2 id="previous-work"><a href="#previous-work" class="header-anchor">#</a> Previous work</h2> <ul><li>2019: <a href="https://github.com/datopian/import-ui" target="_blank" rel="noopener noreferrer">https://github.com/datopian/import-ui<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> - alpha React App. Working demo at <a href="http://datopian.github.io/import-ui" target="_blank" rel="noopener noreferrer">http://datopian.github.io/import-ui<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>2018: <a href="https://github.com/datopian/data-import-ui" target="_blank" rel="noopener noreferrer">https://github.com/datopian/data-import-ui<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (unfinished React App)</li> <li><a href="https://github.com/datahq/pm/issues/90" target="_blank" rel="noopener noreferrer">https://github.com/datahq/pm/issues/90<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/frictionlessdata/datapackage-ui" target="_blank" rel="noopener noreferrer">https://github.com/frictionlessdata/datapackage-ui<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Cf also openspending version
<ul><li>can take from openspending but do it right üòÉ</li></ul></li> <li>the spreadsheet view is best - see <a href="https://docs.google.com/spreadsheets/d/1RoKbiTXaxT_N5Vio93Er-BA3ev3iwWlu4KYv-M7kvqc/edit#gid=0" target="_blank" rel="noopener noreferrer">example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>maybe given option to rotate if a lot of rows</li></ul></li> <li>v1 should assume tidy data</li> <li>(?) v2 should allow for some simple wrangling to get tidy data (??)</li> <li>This is a template for people building their own configurers</li></ul> <h3 id="original-flow-for-datahub-data-cli-in-2016"><a href="#original-flow-for-datahub-data-cli-in-2016" class="header-anchor">#</a> Original Flow for DataHub <code>data</code> cli in 2016</h3> <p>Context:</p> <ul><li>you are pushing the raw file</li> <li>and the extraction to get one or more data tables ‚Ä¶</li> <li>in the background we are creating a data package + pipeline</li></ul> <div class="language- extra-class"><pre class="language-text"><code>data push {file}
</code></pre></div><p>Algorithm:</p> <ol><li>Detect type / format</li> <li>Choose the data (e.g. sheet from excel)</li> <li>Review the headers</li> <li>Infer data-types and review</li> <li>[Add constraints]</li> <li>Data validation</li> <li>Upload</li> <li>Get back a link - view page (or the raw url) e.g. <a href="http://datapackaged.com/core/finance-vix" target="_blank" rel="noopener noreferrer">http://datapackaged.com/core/finance-vix<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>You can view, share, publish, [fork]</li></ul></li></ol> <p>Details</p> <ol><li><p>Detect file type</p> <ol><li>file extension</li> <li>Offer guess</li> <li>Probable guess (options?)</li> <li>Unknown - tell us</li> <li>Detect encoding (for CSV)</li></ol></li> <li><p>Choose the data</p> <ol><li>Good data case</li> <li>1 sheet =&gt; ok</li> <li>Multiple sheets guess and offer</li> <li>Multiple sheets - ask them (which to include)</li> <li>bad data case - e.g. selecting within table</li></ol></li> <li><p>Review the headers</p> <ul><li>Here is what we found</li> <li>More than one option for headers - try to reconcile</li></ul></li></ol> <h2 id="appendix-integration-into-ckan-v2-flow"><a href="#appendix-integration-into-ckan-v2-flow" class="header-anchor">#</a> Appendix: Integration into CKAN v2 Flow</h2> <p>See <a href="https://github.com/datopian/datapub/issues/38" target="_blank" rel="noopener noreferrer">https://github.com/datopian/datapub/issues/38<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="current-system"><a href="#current-system" class="header-anchor">#</a> Current system</h3> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><h3 id="new-system"><a href="#new-system" class="header-anchor">#</a> New system</h3> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><p>Resource editor</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><h2 id="appendix-project-creation-flow-comparison"><a href="#appendix-project-creation-flow-comparison" class="header-anchor">#</a> Appendix: Project Creation Flow Comparison</h2> <h3 id="github"><a href="#github" class="header-anchor">#</a> Github</h3> <p>Step 1</p> <p><img src="https://i.imgur.com/J5logpK.png" alt=""></p> <p>Step 2</p> <p><img src="https://i.imgur.com/ruAQxCL.png" alt=""></p> <h3 id="gitlab"><a href="#gitlab" class="header-anchor">#</a> Gitlab</h3> <p>Step 1</p> <p><img src="https://i.imgur.com/jhtK4Ew.png" alt=""></p> <p>Step 2</p> <p><img src="https://i.imgur.com/me8uTRo.png" alt=""></p> <p><img src="https://i.imgur.com/8HjRRFR.png" alt=""></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/datopian/tech.datopian.com/edit/master/publish/design/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Modified:</span> <span class="time">1/31/2022, 5:20:15 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.93a22573.js" defer></script><script src="/assets/js/3.d799bd9e.js" defer></script><script src="/assets/js/76.d2919968.js" defer></script>
  </body>
</html>

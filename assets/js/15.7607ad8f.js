(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{391:function(t,a,s){"use strict";s.r(a);var e=s(18),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"ckan-client-guide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ckan-client-guide"}},[t._v("#")]),t._v(" CKAN Client Guide")]),t._v(" "),s("p",[t._v("Guide to interacting with "),s("a",{attrs:{href:"/ckan"}},[t._v("CKAN")]),t._v(" for power users such as data scientists, data engineers and data wranglers.")]),t._v(" "),s("p",[t._v("This guide is about adding and managing data in CKAN programmatically and it assumes:")]),t._v(" "),s("ul",[s("li",[t._v("You are familiar with key concepts like metadata, data etc.")]),t._v(" "),s("li",[t._v("You are working programmatically e.g. in one of Python, R, JavaScript, etc.")])]),t._v(" "),s("h2",{attrs:{id:"frictionless-formats"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#frictionless-formats"}},[t._v("#")]),t._v(" Frictionless Formats")]),t._v(" "),s("p",[t._v("Clients use "),s("a",{attrs:{href:"https://specs.frictionlessdata.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Frictionless formats"),s("OutboundLink")],1),t._v(" by default for describing dataset and resource objects passed to client methods. Internally, we then use the a CKAN<=>Frictionless Mapper ("),s("a",{attrs:{href:"https://github.com/datopian/frictionless-ckan-mapper-js",target:"_blank",rel:"noopener noreferrer"}},[t._v("js"),s("OutboundLink")],1),t._v(", [python][c2fpy] to convert to CKAN formats before calling the API. Thus, you can use Frictionless Formats by default with the client. (As CKAN moves to Frictionless to default this will gradually become unnecessary).")]),t._v(" "),s("h2",{attrs:{id:"quick-start"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#quick-start"}},[t._v("#")]),t._v(" Quick start")]),t._v(" "),s("p",[t._v("This guide currently uses a Python idiom by default (e.g. lower case, underscore). You can adapt to R and Javascript as needed and we provide alternative examples where possible.")]),t._v(" "),s("h3",{attrs:{id:"prerequisites"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[t._v("#")]),t._v(" Prerequisites")]),t._v(" "),s("p",[t._v("Install the SDK for your language and configure it.")]),t._v(" "),s("ul",[s("li",[t._v("Python: "),s("a",{attrs:{href:"https://github.com/datopian/ckan3-py-sdk#install",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/datopian/ckan3-py-sdk#install"),s("OutboundLink")],1),t._v(")")]),t._v(" "),s("li",[t._v("Javascript: …")]),t._v(" "),s("li",[t._v("R: coming soon")])]),t._v(" "),s("p",[t._v("### Create a client")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" ckanclient "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Client\n\nendpoint "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://my-ckan.com/'")]),t._v("\ntoken "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xxxx'")]),t._v("              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# your CKAN API key")]),t._v("\norg_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-org'")]),t._v("         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default organization on CKAN to add datasets to")]),t._v("\nclient "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("endpoint"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" org_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"upload-a-resource-file-and-implicitly-create-a-new-dataset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#upload-a-resource-file-and-implicitly-create-a-new-dataset"}},[t._v("#")]),t._v(" Upload a resource (file) (and implicitly create a new Dataset)")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# loads a resource from a path")]),t._v("\nresource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" f11s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resource_file_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndataset_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sample-dataset'")]),t._v("\ndataset "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" f11s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dataset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndataset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nclient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("push"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"create-a-new-empty-dataset-with-metadata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-a-new-empty-dataset-with-metadata"}},[t._v("#")]),t._v(" Create a new empty Dataset with metadata")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("dataset "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" f11s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Dataset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'metadata'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'maintainer_email'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sample@datopian.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nclient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("push"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"adding-a-resource-to-an-existing-dataset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#adding-a-resource-to-an-existing-dataset"}},[t._v("#")]),t._v(" Adding a resource to an existing Dataset")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("resource "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" f11s"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sample.csv'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# this will upload the file and add the resource to the dataset")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# NB: resource metadata e.g. name, title etc will be auto-inferred from the file")]),t._v("\nclient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("push_resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    resource"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    dataset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dataset-name'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    append"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"edit-a-dataset-s-metadata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#edit-a-dataset-s-metadata"}},[t._v("#")]),t._v(" Edit a Dataset’s metadata")]),t._v(" "),s("blockquote",[s("p",[t._v("WARNING: Not implemented yet.")])]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("dataset "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" client"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_dataset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dataset_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sample_dataset'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nclient"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("update_metadata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    dataset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    metadata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'maintainer_email'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sample@datopian.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("For details of metadata see the metadata reference below …")]),t._v(" "),s("h2",{attrs:{id:"api-porcelain"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-porcelain"}},[t._v("#")]),t._v(" API - Porcelain")]),t._v(" "),s("h3",{attrs:{id:"retrieve"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#retrieve"}},[t._v("#")]),t._v(" "),s("code",[t._v("retrieve")])]),t._v(" "),s("h3",{attrs:{id:"push"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#push"}},[t._v("#")]),t._v(" "),s("code",[t._v("push")])]),t._v(" "),s("h2",{attrs:{id:"api-plumbing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api-plumbing"}},[t._v("#")]),t._v(" API - Plumbing")]),t._v(" "),s("h3",{attrs:{id:"action-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#action-api"}},[t._v("#")]),t._v(" Action API")]),t._v(" "),s("h3",{attrs:{id:"storage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#storage"}},[t._v("#")]),t._v(" Storage")]),t._v(" "),s("h2",{attrs:{id:"metadata-reference"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#metadata-reference"}},[t._v("#")]),t._v(" Metadata reference")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),s("p",[t._v("Your site may have custom metadata that differs from the default set below.")])]),t._v(" "),s("p",[t._v("## Generating templates")]),t._v(" "),s("p",[t._v("TODO")]),t._v(" "),s("h2",{attrs:{id:"design-principles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#design-principles"}},[t._v("#")]),t._v(" Design Principles")]),t._v(" "),s("p",[t._v("The client SHOULD use Frictionless formats by default for describing dataset and resource objects passed to client methods.")]),t._v(" "),s("p",[t._v("In addition, where more than metadata is needed (e.g. we need to access the data stream of get the schema) we expect the Dataset and Resource object to follow the Frictionless Data Lib pattern "),s("a",{attrs:{href:"https://github.com/frictionlessdata/project/blob/master/rfcs/0004-frictionless-data-lib-pattern.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/frictionlessdata/project/blob/master/rfcs/0004-frictionless-data-lib-pattern.md"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);
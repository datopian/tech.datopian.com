<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Frontend plugins | Datopian Tech</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="An overview of our technology">
    <link rel="preload" href="/assets/css/0.styles.2870a88c.css" as="style"><link rel="preload" href="/assets/js/app.91ed13f4.js" as="script"><link rel="preload" href="/assets/js/3.bcd1af25.js" as="script"><link rel="preload" href="/assets/js/55.71731dfe.js" as="script"><link rel="prefetch" href="/assets/js/10.31b4becf.js"><link rel="prefetch" href="/assets/js/11.61e8b0a8.js"><link rel="prefetch" href="/assets/js/12.48102498.js"><link rel="prefetch" href="/assets/js/13.2c3916f6.js"><link rel="prefetch" href="/assets/js/14.4f61d73b.js"><link rel="prefetch" href="/assets/js/15.3c60557e.js"><link rel="prefetch" href="/assets/js/16.220efa0c.js"><link rel="prefetch" href="/assets/js/17.703dc7e5.js"><link rel="prefetch" href="/assets/js/18.4ad9c2f6.js"><link rel="prefetch" href="/assets/js/19.08d6ce84.js"><link rel="prefetch" href="/assets/js/20.593472be.js"><link rel="prefetch" href="/assets/js/21.287ab819.js"><link rel="prefetch" href="/assets/js/22.f6a195cc.js"><link rel="prefetch" href="/assets/js/23.557e8ad3.js"><link rel="prefetch" href="/assets/js/24.24abab02.js"><link rel="prefetch" href="/assets/js/25.04e2f300.js"><link rel="prefetch" href="/assets/js/26.7e0f0ea7.js"><link rel="prefetch" href="/assets/js/27.3f277e82.js"><link rel="prefetch" href="/assets/js/28.092b873b.js"><link rel="prefetch" href="/assets/js/29.d10781d9.js"><link rel="prefetch" href="/assets/js/30.a028dff1.js"><link rel="prefetch" href="/assets/js/31.ba2d52ff.js"><link rel="prefetch" href="/assets/js/32.5c4206ad.js"><link rel="prefetch" href="/assets/js/33.52ad0cf6.js"><link rel="prefetch" href="/assets/js/34.3ac8171d.js"><link rel="prefetch" href="/assets/js/35.5908e21c.js"><link rel="prefetch" href="/assets/js/36.ca16feff.js"><link rel="prefetch" href="/assets/js/37.5ebe051a.js"><link rel="prefetch" href="/assets/js/38.9dcde0fe.js"><link rel="prefetch" href="/assets/js/39.12a5f8c1.js"><link rel="prefetch" href="/assets/js/4.fa789a28.js"><link rel="prefetch" href="/assets/js/40.31ba1f6b.js"><link rel="prefetch" href="/assets/js/41.214bc5c1.js"><link rel="prefetch" href="/assets/js/42.1ad46f29.js"><link rel="prefetch" href="/assets/js/43.861dc57f.js"><link rel="prefetch" href="/assets/js/44.f6e9d12a.js"><link rel="prefetch" href="/assets/js/45.a8994c3b.js"><link rel="prefetch" href="/assets/js/46.3ff76844.js"><link rel="prefetch" href="/assets/js/47.8504aeac.js"><link rel="prefetch" href="/assets/js/48.c9b8e9b3.js"><link rel="prefetch" href="/assets/js/49.2255601d.js"><link rel="prefetch" href="/assets/js/5.9e82f6f2.js"><link rel="prefetch" href="/assets/js/50.0625637d.js"><link rel="prefetch" href="/assets/js/51.778e240c.js"><link rel="prefetch" href="/assets/js/52.b3cf974e.js"><link rel="prefetch" href="/assets/js/53.ebd75af9.js"><link rel="prefetch" href="/assets/js/54.3fbdc893.js"><link rel="prefetch" href="/assets/js/56.4ab3d5b7.js"><link rel="prefetch" href="/assets/js/57.60f51c5c.js"><link rel="prefetch" href="/assets/js/58.4a2fb636.js"><link rel="prefetch" href="/assets/js/59.bdc6e50d.js"><link rel="prefetch" href="/assets/js/6.ed777fa0.js"><link rel="prefetch" href="/assets/js/60.12fc97ff.js"><link rel="prefetch" href="/assets/js/61.c3912c79.js"><link rel="prefetch" href="/assets/js/62.0752b962.js"><link rel="prefetch" href="/assets/js/63.6bd633d5.js"><link rel="prefetch" href="/assets/js/64.7788a738.js"><link rel="prefetch" href="/assets/js/65.b5e8ff6d.js"><link rel="prefetch" href="/assets/js/66.fbf83de3.js"><link rel="prefetch" href="/assets/js/67.e5ce509b.js"><link rel="prefetch" href="/assets/js/68.14f08dc5.js"><link rel="prefetch" href="/assets/js/69.cd039252.js"><link rel="prefetch" href="/assets/js/7.65fba8d7.js"><link rel="prefetch" href="/assets/js/70.bf54f2ac.js"><link rel="prefetch" href="/assets/js/71.a0460410.js"><link rel="prefetch" href="/assets/js/72.5e7835b6.js"><link rel="prefetch" href="/assets/js/73.0c02f49a.js"><link rel="prefetch" href="/assets/js/74.61c3d14f.js"><link rel="prefetch" href="/assets/js/75.d1096f6c.js"><link rel="prefetch" href="/assets/js/76.46f481ea.js"><link rel="prefetch" href="/assets/js/77.d2bdc088.js"><link rel="prefetch" href="/assets/js/78.0b85f017.js"><link rel="prefetch" href="/assets/js/79.357686f7.js"><link rel="prefetch" href="/assets/js/8.c5e0041f.js"><link rel="prefetch" href="/assets/js/80.9c009b28.js"><link rel="prefetch" href="/assets/js/9.61d0e8cb.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.21ef4710.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2870a88c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Datopian Tech</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Features" class="dropdown-title"><span class="title">Features</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/" class="nav-link">
  Views
</a></li></ul></div></div> <a href="https://github.com/datopian/tech.datopian.com" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Features" class="dropdown-title"><span class="title">Features</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/" class="nav-link">
  Views
</a></li></ul></div></div> <a href="https://github.com/datopian/tech.datopian.com" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Frontend plugins</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frontend/plugins/#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend/plugins/#local-plugins" class="sidebar-link">Local Plugins</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend/plugins/#npm-plugins" class="sidebar-link">NPM Plugins</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend/plugins/#built-in-plugins" class="sidebar-link">Built-in Plugins</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend/plugins/#how-do-i-enable-them" class="sidebar-link">How do I enable them?</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frontend/plugins/#how-do-i-use-them" class="sidebar-link">How do I use them?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frontend/plugins/#applications-showcase" class="sidebar-link">Applications showcase</a></li><li class="sidebar-sub-header"><a href="/frontend/plugins/#carto" class="sidebar-link">Carto</a></li><li class="sidebar-sub-header"><a href="/frontend/plugins/#ckan-pages" class="sidebar-link">CKAN Pages</a></li><li class="sidebar-sub-header"><a href="/frontend/plugins/#dashboard" class="sidebar-link">Dashboard</a></li><li class="sidebar-sub-header"><a href="/frontend/plugins/#google-analytics" class="sidebar-link">Google analytics</a></li><li class="sidebar-sub-header"><a href="/frontend/plugins/#mailer" class="sidebar-link">Mailer</a></li><li class="sidebar-sub-header"><a href="/frontend/plugins/#proxy" class="sidebar-link">Proxy</a></li><li class="sidebar-sub-header"><a href="/frontend/plugins/#wp" class="sidebar-link">WP</a></li><li class="sidebar-sub-header"><a href="/frontend/plugins/#disqus" class="sidebar-link">Disqus</a></li></ul></li><li><a href="/frontend/plugins/#where-should-i-look-for-source-code-of-these-plugins" class="sidebar-link">Where should I look for source code of these plugins?</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="frontend-plugins"><a href="#frontend-plugins" class="header-anchor">#</a> Frontend plugins</h1> <p>Plugins allow you to extend the functionality of the Frontend in all important ways:</p> <ul><li>Adding new pages (or overriding existing ones)</li> <li>Add or adjust authentication and authorization</li> <li>Add functionality to every page e.g. add analytics</li> <li>Overriding or adding data sources</li></ul> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Plugins are extremely easy. Remember the Next Gen frontend is just an express app.</p> <p>Plugins are therefore just vanilla Express!</p> <p>Plugin files are passed the Express <code>app</code> object which they can then extend with middleware or routes. If you aren’t familiar with Express or Express middleware, you may  want to get up to speed: <a href="https://expressjs.com/en/guide/writing-middleware.html" target="_blank" rel="noopener noreferrer">https://expressjs.com/en/guide/writing-middleware.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>There are currently two types of plugins: “local” plugins which are added to the <code>/plugins</code> directory, and npm plugins, which we install via npm.</p> <p>There are also a variety of built-in plugins that come with the default system.</p> <h2 id="local-plugins"><a href="#local-plugins" class="header-anchor">#</a> Local Plugins</h2> <p>Create a directory with the plugin’s name in the <code>/plugins</code> directory.</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> plugins/addheader
</code></pre></div><p>Inside of this directory create a file called <code>index.js</code> with the following contents:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">'x-my-custom-header'</span><span class="token punctuation">,</span> <span class="token number">1234</span><span class="token punctuation">)</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>If you have worked with express middleware, you may recognize this pattern. For more on working with middleware in Express, see the docs <a href="https://expressjs.com/en/guide/writing-middleware.html" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Add the plugin name to your <code>.env</code> file:</p> <div class="language- extra-class"><pre class="language-text"><code>PLUGINS=&quot;addheader&quot;
</code></pre></div><p>Run your application. Web responses from the frontend application should include your custom header.</p> <h2 id="npm-plugins"><a href="#npm-plugins" class="header-anchor">#</a> NPM Plugins</h2> <p>If an express middleware plugin is available as a standalone module on npm you can install it as-is by installing the package via npm, and adding it to your PLUGINS variable in <code>.env</code></p> <p>For example, we will install the cookie-parser plugin, alongside our addheader plugin.</p> <p>Install the npm package:</p> <div class="language- extra-class"><pre class="language-text"><code>$ yarn add cookie-parser
</code></pre></div><p>Now add the plugins to your <code>.env</code>, alongside the custom <code>addheader</code> plugin we created above:</p> <div class="language- extra-class"><pre class="language-text"><code>PLUGINS=&quot;addheader cookie-parser&quot;
</code></pre></div><p>Cookie-parser will now be applied to all of your requests as express middleware!</p> <p>(For instance, you could take advantage of this in custom routes, etc)</p> <p>For more on express middleware: <a href="https://expressjs.com/en/guide/using-middleware.html" target="_blank" rel="noopener noreferrer">https://expressjs.com/en/guide/using-middleware.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="built-in-plugins"><a href="#built-in-plugins" class="header-anchor">#</a> Built-in Plugins</h2> <p>There are a variety of built-in plugins that provide common functionality “out of the box”. For example, most of the projects need a CMS solution (most commonly WordPress or CKAN Pages) or analytics system such as Google Analytics. So we’ve developed number of built-in plugins that you can use in your project and deliver features easily and reliably.</p> <p>All built-in plugins are located here - <a href="https://github.com/datopian/frontend-v2/tree/master/plugins" target="_blank" rel="noopener noreferrer">https://github.com/datopian/frontend-v2/tree/master/plugins<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>We constantly add something new but here is the list of currently available plugins:</p> <ul><li><code>applications-showcase</code> - integration of <a href="https://github.com/ckan/ckanext-showcase" target="_blank" rel="noopener noreferrer">https://github.com/ckan/ckanext-showcase<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li><code>carto</code> - provides carto map visualizations via the Carto VL library.</li> <li><code>ckan_pages</code> - integration of <a href="https://github.com/ckan/ckanext-pages" target="_blank" rel="noopener noreferrer">https://github.com/ckan/ckanext-pages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li> <li><code>dashboard</code> - dashboards based on <a href="https://github.com/datopian/dashboard-js/" target="_blank" rel="noopener noreferrer">https://github.com/datopian/dashboard-js/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library.</li> <li><code>google-analytics</code> - Google Analytics integration.</li> <li><code>mailer</code> - SMTP server in your frontend app.</li> <li><code>proxy</code> - a proxy for your frontend app.</li> <li><code>wp</code> - WordPress CMS integration plugin.</li> <li><code>disqus</code> - Disqus integration.</li></ul> <h2 id="how-do-i-enable-them"><a href="#how-do-i-enable-them" class="header-anchor">#</a> How do I enable them?</h2> <p>Simply add a name of a plugin into your list of <code>PLUGINS</code> in your <a href="/frontend/configs/">config file</a>:</p> <div class="language- extra-class"><pre class="language-text"><code>PLUGINS=proxy wp etc
</code></pre></div><h2 id="how-do-i-use-them"><a href="#how-do-i-use-them" class="header-anchor">#</a> How do I use them?</h2> <h3 id="applications-showcase"><a href="#applications-showcase" class="header-anchor">#</a> Applications showcase</h3> <p>To add applications showcase plugin to your application you need to<br>
enable the plugin in your <code>.env</code> file:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">PLUGINS</span><span class="token operator">=</span><span class="token string">&quot;... applications-showcase ...&quot;</span>
</code></pre></div><p>Here is the list of well-known services that can be used without setting host and port of your SMTP server: <a href="https://nodemailer.com/smtp/well-known/#supported-services" target="_blank" rel="noopener noreferrer">Supported services<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Then you need to implement <code>contact.html</code> template in your theme so that a contact form can be rendered at <code>/contact</code>.</p> <h3 id="carto"><a href="#carto" class="header-anchor">#</a> Carto</h3> <p>Provide carto map visualizations via the Carto VL library.</p> <p>Assumes data is in carto.</p> <h4 id="geocoding-data"><a href="#geocoding-data" class="header-anchor">#</a> Geocoding data</h4> <p>Data needs to have a <code>the_geom</code> column with a valid geometry object.</p> <p>See:</p> <p><a href="https://carto.com/developers/data-services-api/reference/#geocoding-functions" target="_blank" rel="noopener noreferrer">https://carto.com/developers/data-services-api/reference/#geocoding-functions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://carto.com/help/working-with-data/carto-functions/" target="_blank" rel="noopener noreferrer">https://carto.com/help/working-with-data/carto-functions/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>SELECT CDB_LatLng(float, float)</p> <p>To encode from lat long:</p> <p>https://{USER_NAME}.carto.com/api/v2/sql?q=UPDATE {TABLE_NAME} SET the_geom = CDB_LatLng({LAT_COLUMN}, {LON_COLUMN})&amp;api_key={API_KEY_WITH_WRITE_ACCESS}</p> <p><a href="https://paulwalker-datopian.carto.com/api/v2/sql?q=UPDATE" target="_blank" rel="noopener noreferrer">https://paulwalker-datopian.carto.com/api/v2/sql?q=UPDATE<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> accidents_2012_2017 SET the_geom = CDB_LatLng(loc_lat, loc_long)&amp;api_key=Mef_QoqGyQRspq9AumGvbg</p> <p>Auth: Note that the token used needs to be associated with an API user with write / update permissions</p> <h3 id="ckan-pages"><a href="#ckan-pages" class="header-anchor">#</a> CKAN Pages</h3> <p>To use CKAN Pages as your CMS backend, add it to your list of <code>PLUGINS</code> in <code>.env</code> file:</p> <div class="language- extra-class"><pre class="language-text"><code>PLUGINS=ckan_pages
</code></pre></div><p>When enabled, CKAN Pages plugin will use the CKAN <code>API_URL</code> environment variable by default.<br>
To configure a different URL for your CKAN Pages backend add <code>CKAN_PAGES_URL=https://yourckan.com/api/3/action/</code> to your environment.</p> <p>For more info about enabling and using CKAN Pages - <a href="https://github.com/ckan/ckanext-pages" target="_blank" rel="noopener noreferrer">https://github.com/ckan/ckanext-pages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="dashboard"><a href="#dashboard" class="header-anchor">#</a> Dashboard</h3> <p>Integration of <a href="https://github.com/datopian/dashboard-js/" target="_blank" rel="noopener noreferrer">https://github.com/datopian/dashboard-js/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> library. Dashboard configurations are fetched from a git repository. You need to set it up via your config file:</p> <div class="language- extra-class"><pre class="language-text"><code>GIT_BASE_URL=
GIT_OWNER=
</code></pre></div><p>We’ve created a tutorial about how to create and use dashboards:</p> <p><a href="http://tech.datopian.com/dashboards/" target="_blank" rel="noopener noreferrer">http://tech.datopian.com/dashboards/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="google-analytics"><a href="#google-analytics" class="header-anchor">#</a> Google analytics</h3> <p>To add Google Analytics enable the plugin in your <code>.env</code> file:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">PLUGINS</span><span class="token operator">=</span><span class="token string">&quot;... google-analytics ...&quot;</span>
</code></pre></div><h4 id="tracking-code"><a href="#tracking-code" class="header-anchor">#</a> Tracking code</h4> <p>To add tracking code to page templates, set up <code>GA_ID</code> env variable:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">GA_ID</span><span class="token operator">=</span>UA-000000000-0
</code></pre></div><h4 id="google-analytics-api"><a href="#google-analytics-api" class="header-anchor">#</a> Google Analytics Api</h4> <p>To set up <a href="https://developers.google.com/analytics/devguides/reporting/core/v3/reference" target="_blank" rel="noopener noreferrer">google analytics API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <ol><li>create <a href="https://developers.google.com/analytics/devguides/reporting/core/v3/quickstart/service-py#clientId" target="_blank" rel="noopener noreferrer">Service Account credentials in google developer console<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>use the credentials from the json file for the following env variables:</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">GA_CLIENT_EMAIL</span><span class="token operator">=</span><span class="token operator">&lt;</span>client_email<span class="token operator">&gt;</span>
<span class="token assign-left variable">GA_PRIVATE_KEY</span><span class="token operator">=</span><span class="token operator">&lt;</span>private_key, a long string with line breaks, should be inside inside quotes <span class="token punctuation">(</span>&quot;<span class="token punctuation">)</span><span class="token operator">&gt;</span>
</code></pre></div><ol start="3"><li>find the view id in google analytics,</li></ol> <ul><li>you can specify it in the env file:</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">GA_VIEW_ID</span><span class="token operator">=</span><span class="token operator">&lt;</span>optional, can be specified <span class="token keyword">in</span> request params<span class="token operator">&gt;</span>
</code></pre></div><ul><li>or specify it directly in the code later, in case you’ll need different views</li></ul> <ol start="4"><li>example of the google analytics api object use:</li></ol> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">const</span> view_id <span class="token operator">=</span> <span class="token operator">&lt;</span>view id <span class="token keyword">from</span> google analytics<span class="token operator">&gt;</span>
<span class="token keyword">const</span> gaApi <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'ga-api'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string">'ids'</span><span class="token operator">:</span> <span class="token string">'ga:'</span> <span class="token operator">+</span> view_id<span class="token punctuation">,</span> <span class="token comment">//optionally here or in env file</span>
      <span class="token string">'start-date'</span><span class="token operator">:</span> <span class="token string">'30daysAgo'</span><span class="token punctuation">,</span>
      <span class="token string">'end-date'</span><span class="token operator">:</span> <span class="token string">'today'</span><span class="token punctuation">,</span>
      <span class="token string">'sort'</span><span class="token operator">:</span> <span class="token string">'-ga:uniquePageviews'</span><span class="token punctuation">,</span>
      <span class="token string">'dimensions'</span><span class="token operator">:</span> <span class="token string">'ga:pagePathLevel2'</span><span class="token punctuation">,</span>
      <span class="token string">'metrics'</span><span class="token operator">:</span> <span class="token string">'ga:uniquePageviews'</span><span class="token punctuation">,</span>
      <span class="token string">'max-results'</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
      <span class="token string">'filters'</span><span class="token operator">:</span> <span class="token string">'ga:pagePathLevel1==/dataset/'</span>
    <span class="token punctuation">}</span>
<span class="token keyword">const</span> googleAnalyticsData <span class="token operator">=</span> gaApi<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span>
<span class="token operator">...</span>
</code></pre></div><h3 id="mailer"><a href="#mailer" class="header-anchor">#</a> Mailer</h3> <p>To enable mailer plugin, you need to update your <code>.env</code> as following:</p> <div class="language- extra-class"><pre class="language-text"><code>PLUGINS=&quot;... mailer ...&quot;
SMTP_SERVICE=gmail (optional if you have host and port details)
SMTP_HOST=smtp.example.com (optional if you set 'SMTP_SERVICE')
SMTP_PORT=587 (optional if you set 'SMTP_SERVICE')
EMAIL_FROM=from@example.com
EMAIL_PASSWORD=*****
EMAIL_TO=to@example.com
</code></pre></div><h3 id="proxy"><a href="#proxy" class="header-anchor">#</a> Proxy</h3> <p>The proxy plugin ships with frontend-v2. To enable it via <code>.env</code> file:</p> <div class="language- extra-class"><pre class="language-text"><code>PLUGINS=proxy other_plugins
</code></pre></div><p>Use <code>PROXY_DATASTORE</code> and <code>PROXY_FILESTORE</code> environment variables to indicate host of your datastore and filestore:</p> <div class="language- extra-class"><pre class="language-text"><code>PROXY_DATASTORE=demo.ckan.org
PROXY_FILESTORE=
</code></pre></div><p>Now you can request datastore by <code>/proxy/datastore/{path}</code>.</p> <h3 id="wp"><a href="#wp" class="header-anchor">#</a> WP</h3> <h4 id="setup"><a href="#setup" class="header-anchor">#</a> Setup</h4> <p>The wordpress plugin (<code>/plugins/wp</code>) ships with frontend-v2. To enable it via <code>.env</code> file:</p> <div class="language- extra-class"><pre class="language-text"><code>PLUGINS=wp
</code></pre></div><p>Use <code>WP_URL</code> environment variable to point to your WordPress instance. For example, we have test wordpress blog here <a href="https://oddk.home.blog/" target="_blank" rel="noopener noreferrer">https://oddk.home.blog/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> so it would be:</p> <div class="language- extra-class"><pre class="language-text"><code>WP_URL=https://oddk.home.blog/
</code></pre></div><p>Use <code>WP_BLOG_PATH</code> environment variable to configure where your blog should be located in your site - by default, it is at <code>/news</code>. To change it, e.g., to <code>/blog</code>:</p> <div class="language- extra-class"><pre class="language-text"><code>WP_BLOG_PATH=&quot;/blog&quot;
</code></pre></div><p>If your blog is private, you can set up <code>WP_TOKEN</code> environment variable to pass your access token. To get access token for private WP blog, check out this - <a href="https://developer.wordpress.com/docs/oauth2/" target="_blank" rel="noopener noreferrer">https://developer.wordpress.com/docs/oauth2/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h4 id="how-it-works"><a href="#how-it-works" class="header-anchor">#</a> How it works</h4> <p>The plugin adds/changes the following routes:</p> <ul><li><code>/</code> - your home view now receives <code>posts</code> variable with the latest 3 blog posts from your WP instance;</li> <li><code>/news</code> - your blog view now receives <code>posts</code> variable with the latest 10 blog posts;</li> <li><code>/news/:page</code> - renders individual post page - <code>post.html</code> view;</li> <li><code>/:page</code> and <code>/:parent/:page</code> - if slug is found in your WP instance, renders static page view (<code>static.html</code>).</li></ul> <h3 id="disqus"><a href="#disqus" class="header-anchor">#</a> Disqus</h3> <p>We don’t have special plugin for this feature as you can simply setup an account on <a href="https://disqus.com/" target="_blank" rel="noopener noreferrer">https://disqus.com/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and get a snippet that you can paste in your template. E.g., you can paste it in the <code>showcase.html</code> if you need it for every dataset page and so on.</p> <h2 id="where-should-i-look-for-source-code-of-these-plugins"><a href="#where-should-i-look-for-source-code-of-these-plugins" class="header-anchor">#</a> Where should I look for source code of these plugins?</h2> <p>You can find all plugins here - <a href="https://github.com/datopian/frontend-v2/tree/master/plugins" target="_blank" rel="noopener noreferrer">https://github.com/datopian/frontend-v2/tree/master/plugins<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/datopian/tech.datopian.com/edit/master/frontend/plugins/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Modified:</span> <span class="time">9/3/2020, 5:02:28 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.91ed13f4.js" defer></script><script src="/assets/js/3.bcd1af25.js" defer></script><script src="/assets/js/55.71731dfe.js" defer></script>
  </body>
</html>

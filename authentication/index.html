<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Authentication üîê | Datopian Tech</title>
    <meta name="generator" content="VuePress 1.4.1">
    
    <meta name="description" content="An overview of our technology">
    <link rel="preload" href="/assets/css/0.styles.2870a88c.css" as="style"><link rel="preload" href="/assets/js/app.59a08162.js" as="script"><link rel="preload" href="/assets/js/3.d5d0a0d8.js" as="script"><link rel="preload" href="/assets/js/9.077580af.js" as="script"><link rel="prefetch" href="/assets/js/10.e7e6d19f.js"><link rel="prefetch" href="/assets/js/11.05075ec2.js"><link rel="prefetch" href="/assets/js/12.99d2f2e9.js"><link rel="prefetch" href="/assets/js/13.ebe56481.js"><link rel="prefetch" href="/assets/js/14.be40ebd0.js"><link rel="prefetch" href="/assets/js/15.7607ad8f.js"><link rel="prefetch" href="/assets/js/16.828eb858.js"><link rel="prefetch" href="/assets/js/17.8bdbc3b2.js"><link rel="prefetch" href="/assets/js/18.4b32168f.js"><link rel="prefetch" href="/assets/js/19.9331b1ce.js"><link rel="prefetch" href="/assets/js/20.2506793a.js"><link rel="prefetch" href="/assets/js/21.5df00edd.js"><link rel="prefetch" href="/assets/js/22.0a8334d1.js"><link rel="prefetch" href="/assets/js/23.9f8a2052.js"><link rel="prefetch" href="/assets/js/24.10bf6a23.js"><link rel="prefetch" href="/assets/js/25.6fea73c9.js"><link rel="prefetch" href="/assets/js/26.2cd12626.js"><link rel="prefetch" href="/assets/js/27.5b84a66f.js"><link rel="prefetch" href="/assets/js/28.56e20ee9.js"><link rel="prefetch" href="/assets/js/29.9da0cfd4.js"><link rel="prefetch" href="/assets/js/30.54219014.js"><link rel="prefetch" href="/assets/js/31.7fc22d93.js"><link rel="prefetch" href="/assets/js/32.772d5b23.js"><link rel="prefetch" href="/assets/js/33.11e65ce9.js"><link rel="prefetch" href="/assets/js/34.5a470e8a.js"><link rel="prefetch" href="/assets/js/35.b2976562.js"><link rel="prefetch" href="/assets/js/36.d9ab4286.js"><link rel="prefetch" href="/assets/js/37.27a3d0a8.js"><link rel="prefetch" href="/assets/js/38.a7c4fd01.js"><link rel="prefetch" href="/assets/js/39.c29a08c9.js"><link rel="prefetch" href="/assets/js/4.421f6159.js"><link rel="prefetch" href="/assets/js/40.c355f824.js"><link rel="prefetch" href="/assets/js/41.9a857659.js"><link rel="prefetch" href="/assets/js/42.204a8c44.js"><link rel="prefetch" href="/assets/js/43.c2016243.js"><link rel="prefetch" href="/assets/js/44.fd1c2c89.js"><link rel="prefetch" href="/assets/js/45.147cf8e8.js"><link rel="prefetch" href="/assets/js/46.d4a89a47.js"><link rel="prefetch" href="/assets/js/47.350d6280.js"><link rel="prefetch" href="/assets/js/48.7d584adc.js"><link rel="prefetch" href="/assets/js/49.fb9cbba4.js"><link rel="prefetch" href="/assets/js/5.95afe96d.js"><link rel="prefetch" href="/assets/js/50.e72b1b78.js"><link rel="prefetch" href="/assets/js/51.bcadcf49.js"><link rel="prefetch" href="/assets/js/52.76bd2971.js"><link rel="prefetch" href="/assets/js/53.e1d96fad.js"><link rel="prefetch" href="/assets/js/54.43784b8b.js"><link rel="prefetch" href="/assets/js/55.79dc17e7.js"><link rel="prefetch" href="/assets/js/56.627c9324.js"><link rel="prefetch" href="/assets/js/57.1c668879.js"><link rel="prefetch" href="/assets/js/58.b7f28b13.js"><link rel="prefetch" href="/assets/js/59.1a3e2717.js"><link rel="prefetch" href="/assets/js/6.bd48916b.js"><link rel="prefetch" href="/assets/js/60.e8889dc8.js"><link rel="prefetch" href="/assets/js/61.6fd43e0a.js"><link rel="prefetch" href="/assets/js/62.9c0a9f47.js"><link rel="prefetch" href="/assets/js/63.0b2aa6e7.js"><link rel="prefetch" href="/assets/js/64.52e10826.js"><link rel="prefetch" href="/assets/js/65.33655e3b.js"><link rel="prefetch" href="/assets/js/66.7354eba9.js"><link rel="prefetch" href="/assets/js/67.5b2b8941.js"><link rel="prefetch" href="/assets/js/68.209720b1.js"><link rel="prefetch" href="/assets/js/69.63b05519.js"><link rel="prefetch" href="/assets/js/7.5da2f63f.js"><link rel="prefetch" href="/assets/js/70.bffcb2e6.js"><link rel="prefetch" href="/assets/js/71.e7ab8c87.js"><link rel="prefetch" href="/assets/js/72.acaac45d.js"><link rel="prefetch" href="/assets/js/73.577b4bba.js"><link rel="prefetch" href="/assets/js/74.015383bc.js"><link rel="prefetch" href="/assets/js/75.957a033e.js"><link rel="prefetch" href="/assets/js/76.8c351ea8.js"><link rel="prefetch" href="/assets/js/77.d1495ebd.js"><link rel="prefetch" href="/assets/js/78.4e3a09b5.js"><link rel="prefetch" href="/assets/js/79.d129c1fc.js"><link rel="prefetch" href="/assets/js/8.ab05c86f.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.6161fb7d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2870a88c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Datopian Tech</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Features" class="dropdown-title"><span class="title">Features</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/" class="nav-link">
  Views
</a></li></ul></div></div> <a href="https://github.com/datopian/tech.datopian.com" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Features" class="dropdown-title"><span class="title">Features</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/views/" class="nav-link">
  Views
</a></li></ul></div></div> <a href="https://github.com/datopian/tech.datopian.com" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Authentication üîê</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/authentication/#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/authentication/#root-identity-determination-options" class="sidebar-link">Root Identity Determination options üîë</a></li><li class="sidebar-sub-header"><a href="/authentication/#account-aka-profile" class="sidebar-link">Account (aka profile) üë§</a></li><li class="sidebar-sub-header"><a href="/authentication/#sessions" class="sidebar-link">Sessions ‚åõÔ∏è</a></li></ul></li><li><a href="/authentication/#key-job-stories" class="sidebar-link">Key Job Stories</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/authentication/#ckan-2-ckan-classic" class="sidebar-link">CKAN 2 (CKAN Classic)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/authentication/#basic-ckan-authentication" class="sidebar-link">Basic CKAN authentication</a></li><li class="sidebar-sub-header"><a href="/authentication/#ckan-classic-as-oauth-client" class="sidebar-link">CKAN Classic as OAuth client</a></li></ul></li><li><a href="/authentication/#ckan-3-next-gen" class="sidebar-link">CKAN 3 (Next Gen)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/authentication/#existing-work" class="sidebar-link">Existing work</a></li></ul></li><li><a href="/authentication/#ckan-2-to-ckan-3-aka-next-gen" class="sidebar-link">CKAN 2 to CKAN 3 (aka Next Gen)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/authentication/#appendix" class="sidebar-link">Appendix</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/authentication/#more-job-stories" class="sidebar-link">More job stories</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="authentication"><a href="#authentication" class="header-anchor">#</a> Authentication üîê</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>The core function of authentication is to <strong>Identify</strong> Users of the Portal (in a federated way) so we can base access on their identity.</p> <p>There are 3 major conceptual components: Identity, Accounts and Sessions which come together in the following stages:</p> <ul><li><strong>Root Identity Determination:</strong> Determine Identity often via Delegation</li> <li><strong>Sessions:</strong> Persistence of the identity in the web application in a secure way (without new identity determination on each request! I don‚Äôt want to have to login via third party service every time)</li> <li><strong>Account (aka profile):</strong> Storing Related Account/Profile Information in our application (not in third party identity) eg. email, name (other preferences)
<ul><li>This will get auto-created usually at first Identification</li> <li>In limited case this can be seen as a cache of info from Identity system (e.g. your email)</li> <li>However often richer info that is app specific that is generated (relevant for personalization)</li></ul></li></ul> <h3 id="root-identity-determination-options"><a href="#root-identity-determination-options" class="header-anchor">#</a> Root Identity Determination options üîë</h3> <p>The identity determination can be done in multiple ways. In this article we‚Äôre considering following 3 options that we believe are widely used:</p> <ul><li>Password authentication - traditional username and password pair</li> <li>Single Sign-on (SSO) via protocols such as OAuth, SAML, OpenID Connect</li> <li>One-time password (OTP) via email or SMS (aka passwordless connection)</li></ul> <h4 id="password-authentication"><a href="#password-authentication" class="header-anchor">#</a> Password authentication</h4> <p>Traditional way of authentication of users. When signing up user provides at least username and password pair which is then stored in a database for future authentication processes. Normally, additional information such as email address, full name etc. is also requested when registering.</p> <p>Examples of password authentication in popular services:</p> <ul><li>GitHub - <a href="https://github.com/join" target="_blank" rel="noopener noreferrer">https://github.com/join<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>GitLab - <a href="https://gitlab.com/users/sign_up" target="_blank" rel="noopener noreferrer">https://gitlab.com/users/sign_up<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>NPM - <a href="https://www.npmjs.com/signup" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/signup<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h4 id="single-sign-on-sso"><a href="#single-sign-on-sso" class="header-anchor">#</a> Single Sign-on (SSO)</h4> <p>The way of delegating identity determination process to some third-party service. Normally, popular social network services are used, e.g., Google, Facebook, Twitter etc. SSO implementations can be done using OAuth or SAML protocols. In addition, there is OpenID Connect protocol which is an extension of OAuth2.0.</p> <ul><li>OAuth
<ul><li>JWT based</li> <li>JSON based</li> <li>‚Äòwebby‚Äô</li></ul></li> <li>SAML
<ul><li>XML based</li> <li>SOAP based</li> <li>‚Äòenterprisey‚Äô</li></ul></li></ul> <p>List of OAuth providers:</p> <p><a href="https://en.wikipedia.org/wiki/List_of_OAuth_providers" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/List_of_OAuth_providers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Examples of SSO in popular projects:</p> <ul><li><a href="https://datahub.io/login" target="_blank" rel="noopener noreferrer">https://datahub.io/login<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://vercel.com/signup" target="_blank" rel="noopener noreferrer">https://vercel.com/signup<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h4 id="one-time-password-otp"><a href="#one-time-password-otp" class="header-anchor">#</a> One-time password (OTP)</h4> <p>Also known as dynamic password, OTP also solves limitations of traditional password authentication method. Usually, the one time passwords are received via email or SMS.</p> <h3 id="account-aka-profile"><a href="#account-aka-profile" class="header-anchor">#</a> Account (aka profile) üë§</h3> <ul><li>Storage of user profile information (email, fullname, gravatar etc.)</li> <li>Retrieving user profile information via API</li> <li>Updating profile</li> <li>Deleting profile</li></ul> <h3 id="sessions"><a href="#sessions" class="header-anchor">#</a> Sessions ‚åõÔ∏è</h3> <ul><li>Log out: DePersisting the Session</li> <li>Invalidating all Sessions: e.g. if a security issue</li> <li>Sessions outside of browsers</li></ul> <h2 id="key-job-stories"><a href="#key-job-stories" class="header-anchor">#</a> Key Job Stories</h2> <p>When a user signs in, I want to know her/his identity so that I can limit access and editing based on who she/he is.</p> <p>When a user visits the data portal for the first time, I want to provide him/her a way to register easily/quickly so that more people uses the data portal.</p> <p>When I visit the data portal for the first time, I want to sign up using my existing social network account so that I don‚Äôt need to remember yet another credentials.</p> <p>When I‚Äôm using the CLI app (or anything else outside browser), I want to be able to login so that I can work from the terminal (e.g., have write access: editing datasets etc.).</p> <p><a href="#more-job-stories">More job stories</a>.</p> <h2 id="ckan-2-ckan-classic"><a href="#ckan-2-ckan-classic" class="header-anchor">#</a> CKAN 2 (CKAN Classic)</h2> <h3 id="basic-ckan-authentication"><a href="#basic-ckan-authentication" class="header-anchor">#</a> Basic CKAN authentication</h3> <p>In classic system, we have basic CKAN authentication. Below is how registration page looks like:</p> <p><img src="/assets/img/ckan-register.41f46d26.png" alt="CKAN Classic register page"></p> <p>Registration flow in CKAN Classic:</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><p>We can extend basic CKAN authentication with:</p> <ul><li>LDAP
<ul><li><a href="https://extensions.ckan.org/extension/ldap/" target="_blank" rel="noopener noreferrer">https://extensions.ckan.org/extension/ldap/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/NaturalHistoryMuseum/ckanext-ldap" target="_blank" rel="noopener noreferrer">https://github.com/NaturalHistoryMuseum/ckanext-ldap<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li>OAuth - see below</li> <li>SAML - <a href="https://extensions.ckan.org/extension/saml2/" target="_blank" rel="noopener noreferrer">https://extensions.ckan.org/extension/saml2/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="ckan-classic-as-oauth-client"><a href="#ckan-classic-as-oauth-client" class="header-anchor">#</a> CKAN Classic as OAuth client</h3> <p>CKAN Classic can also be used as OAuth client:</p> <ul><li><a href="https://github.com/conwetlab/ckanext-oauth2" target="_blank" rel="noopener noreferrer">https://github.com/conwetlab/ckanext-oauth2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - this is the only one that‚Äôs maintained.</li> <li><a href="https://github.com/etalab/ckanext-oauth2" target="_blank" rel="noopener noreferrer">https://github.com/etalab/ckanext-oauth2<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - outdated, the one above is based on this.</li> <li><a href="https://github.com/okfn/ckanext-oauth" target="_blank" rel="noopener noreferrer">https://github.com/okfn/ckanext-oauth<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - last commit 9 years ago.</li> <li><a href="https://github.com/ckan/ckanext-oauth2waad" target="_blank" rel="noopener noreferrer">https://github.com/ckan/ckanext-oauth2waad<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> - Windows Azure Active Directory specific and outdated.</li></ul> <p>How it works:</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><h2 id="ckan-3-next-gen"><a href="#ckan-3-next-gen" class="header-anchor">#</a> CKAN 3 (Next Gen)</h2> <p>We have considered some of popular and/or modern solutions for identity management that we can implement in CKAN 3:</p> <p><a href="https://docs.google.com/spreadsheets/d/1qXZyzAbA2NtpnoSZRJ2K_EbaWJnvxkrKVzQ_2rD5eQw/edit#gid=0" target="_blank" rel="noopener noreferrer">https://docs.google.com/spreadsheets/d/1qXZyzAbA2NtpnoSZRJ2K_EbaWJnvxkrKVzQ_2rD5eQw/edit#gid=0<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Shortlist based on scores from the spreadsheet above:</p> <ul><li>Auth0</li> <li>AuthN</li> <li>Ory/Kratos</li></ul> <p>Recommendation:</p> <p>All projects from the shortlist can be considered for a project. It worth to give a try for each of them and find out what works best for your project‚Äôs needs. Testing out Auth0 should be straightforward and take less than an hour. AuthN and Ory/Kratos would require to build docker images and to run it locally but overall it should not be time consuming.</p> <h3 id="existing-work"><a href="#existing-work" class="header-anchor">#</a> Existing work</h3> <p>In <a href="http://datahub.io" target="_blank" rel="noopener noreferrer">datahub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> we have implemented SSO via Google/Github. Below is sequence diagram showing the auth flow with datopian/auth + frontend express app (similar to CKAN 3 frontend):</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><h2 id="ckan-2-to-ckan-3-aka-next-gen"><a href="#ckan-2-to-ckan-3-aka-next-gen" class="header-anchor">#</a> CKAN 2 to CKAN 3 (aka Next Gen)</h2> <p>How does this conceptual framework map to an evolution of CKAN 2 to CKAN 3?</p> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><p>Sequence diagram of login process:</p> <p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG5cdEJyb3dzZXItPj5Gcm9udGVuZDogUmVxdWVzdCB0byBgL2F1dGgvbG9naW5gXG4gIEZyb250ZW5kLT4-S3JhdG9zOiBBdXRoIHJlcXVlc3RcbiAgS3JhdG9zLT4-QnJvd3NlcjogUmVkaXJlY3QgdG8gYC9hdXRoL2xvZ2luP3JlcXVlc3Q9e2lkfWAgcGFyYW1cbiAgQnJvd3Nlci0-PkZyb250ZW5kOiBHZXQgYC9hdXRoL2xvZ2luP3JlcXVlc3Q9e2lkfWBcbiAgRnJvbnRlbmQtPj5LcmF0b3M6IEZldGNoIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgZm9ybVxuICBLcmF0b3MtPj5Gcm9udGVuZDogTG9naW4gb3B0aW9uc1xuICBGcm9udGVuZC0-PkJyb3dzZXI6IFJlbmRlciB0aGUgbG9naW4gZm9ybSB3aXRoIGF2YWlsYWJsZSBvcHRpb25zXG4gIEJyb3dzZXItPj5Gcm9udGVuZDogU3VwcGx5IGZvcm0gZGF0YVxuICBGcm9udGVuZC0-PktyYXRvczogVmFsaWRhdGUgYW5kIGxvZ2luXG4gIEtyYXRvcy0-PkZyb250ZW5kOiBTZXQgc2Vzc2lvblxuICBGcm9udGVuZC0-PkJyb3dzZXI6IFJlZGlyZWN0IHRvIC9kYXNoYm9hcmRcblxuXG5cdFx0XHRcdFx0IiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0" target="_blank" rel="noopener noreferrer"><img src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG5cdEJyb3dzZXItPj5Gcm9udGVuZDogUmVxdWVzdCB0byBgL2F1dGgvbG9naW5gXG4gIEZyb250ZW5kLT4-S3JhdG9zOiBBdXRoIHJlcXVlc3RcbiAgS3JhdG9zLT4-QnJvd3NlcjogUmVkaXJlY3QgdG8gYC9hdXRoL2xvZ2luP3JlcXVlc3Q9e2lkfWAgcGFyYW1cbiAgQnJvd3Nlci0-PkZyb250ZW5kOiBHZXQgYC9hdXRoL2xvZ2luP3JlcXVlc3Q9e2lkfWBcbiAgRnJvbnRlbmQtPj5LcmF0b3M6IEZldGNoIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgZm9ybVxuICBLcmF0b3MtPj5Gcm9udGVuZDogTG9naW4gb3B0aW9uc1xuICBGcm9udGVuZC0-PkJyb3dzZXI6IFJlbmRlciB0aGUgbG9naW4gZm9ybSB3aXRoIGF2YWlsYWJsZSBvcHRpb25zXG4gIEJyb3dzZXItPj5Gcm9udGVuZDogU3VwcGx5IGZvcm0gZGF0YVxuICBGcm9udGVuZC0-PktyYXRvczogVmFsaWRhdGUgYW5kIGxvZ2luXG4gIEtyYXRvcy0-PkZyb250ZW5kOiBTZXQgc2Vzc2lvblxuICBGcm9udGVuZC0-PkJyb3dzZXI6IFJlZGlyZWN0IHRvIC9kYXNoYm9hcmRcblxuXG5cdFx0XHRcdFx0IiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>From ORY/Kratos:</p> <p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gIHBhcnRpY2lwYW50IEIgYXMgQnJvd3NlclxuICBwYXJ0aWNpcGFudCBLIGFzIE9SWSBLcmF0b3NcbiAgcGFydGljaXBhbnQgQSBhcyBZb3VyIEFwcGxpY2F0aW9uXG5cblxuICBCLT4-SzogSW5pdGlhdGUgTG9naW5cbiAgSy0-PkI6IFJlZGlyZWN0cyB0byB5b3VyIEFwcGxpY2F0aW9uJ3MgL2xvZ2luIGVuZHBvaW50XG4gIEItPj5BOiBDYWxscyAvbG9naW5cbiAgQS0tPj5LOiBGZXRjaGVzIGRhdGEgdG8gcmVuZGVyIGZvcm1zIGV0Y1xuICBCLS0-PkE6IEZpbGxzIG91dCBmb3JtcywgY2xpY2tzIGUuZy4gXCJTdWJtaXQgTG9naW5cIlxuICBCLT4-SzogUE9TVHMgZGF0YSB0b1xuICBLLS0-Pks6IFByb2Nlc3NlcyBMb2dpbiBJbmZvXG5cbiAgYWx0IExvZ2luIGRhdGEgdmFsaWRcbiAgICBLLS0-PkI6IFNldHMgc2Vzc2lvbiBjb29raWVcbiAgICBLLT4-QjogUmVkaXJlY3RzIHRvIGUuZy4gRGFzaGJvYXJkXG4gIGVsc2UgTG9naW4gZGF0YSBpbnZhbGlkXG4gICAgSy0tPj5COiBSZWRpcmVjdHMgdG8geW91ciBBcHBsaWNhaXRvbidzIC9sb2dpbiBlbmRwb2ludFxuICAgIEItPj5BOiBDYWxscyAvbG9naW5cbiAgICBBLS0-Pks6IEZldGNoZXMgZGF0YSB0byByZW5kZXIgZm9ybSBmaWVsZHMgYW5kIGVycm9yc1xuICAgIEItLT4-QTogRmlsbHMgb3V0IGZvcm1zIGFnYWluLCBjb3JyZWN0cyBlcnJvcnNcbiAgICBCLT4-SzogUE9TVHMgZGF0YSBhZ2FpbiAtIGFuZCBzbyBvbi4uLlxuICBlbmRcbiIsIm1lcm1haWQiOnsidGhlbWUiOiJuZXV0cmFsIiwic2VxdWVuY2VEaWFncmFtIjp7ImRpYWdyYW1NYXJnaW5YIjoxNSwiZGlhZ3JhbU1hcmdpblkiOjE1LCJib3hUZXh0TWFyZ2luIjowLCJub3RlTWFyZ2luIjoxNSwibWVzc2FnZU1hcmdpbiI6NDUsIm1pcnJvckFjdG9ycyI6dHJ1ZX19fQ" target="_blank" rel="noopener noreferrer"><img src="https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gIHBhcnRpY2lwYW50IEIgYXMgQnJvd3NlclxuICBwYXJ0aWNpcGFudCBLIGFzIE9SWSBLcmF0b3NcbiAgcGFydGljaXBhbnQgQSBhcyBZb3VyIEFwcGxpY2F0aW9uXG5cblxuICBCLT4-SzogSW5pdGlhdGUgTG9naW5cbiAgSy0-PkI6IFJlZGlyZWN0cyB0byB5b3VyIEFwcGxpY2F0aW9uJ3MgL2xvZ2luIGVuZHBvaW50XG4gIEItPj5BOiBDYWxscyAvbG9naW5cbiAgQS0tPj5LOiBGZXRjaGVzIGRhdGEgdG8gcmVuZGVyIGZvcm1zIGV0Y1xuICBCLS0-PkE6IEZpbGxzIG91dCBmb3JtcywgY2xpY2tzIGUuZy4gXCJTdWJtaXQgTG9naW5cIlxuICBCLT4-SzogUE9TVHMgZGF0YSB0b1xuICBLLS0-Pks6IFByb2Nlc3NlcyBMb2dpbiBJbmZvXG5cbiAgYWx0IExvZ2luIGRhdGEgdmFsaWRcbiAgICBLLS0-PkI6IFNldHMgc2Vzc2lvbiBjb29raWVcbiAgICBLLT4-QjogUmVkaXJlY3RzIHRvIGUuZy4gRGFzaGJvYXJkXG4gIGVsc2UgTG9naW4gZGF0YSBpbnZhbGlkXG4gICAgSy0tPj5COiBSZWRpcmVjdHMgdG8geW91ciBBcHBsaWNhaXRvbidzIC9sb2dpbiBlbmRwb2ludFxuICAgIEItPj5BOiBDYWxscyAvbG9naW5cbiAgICBBLS0-Pks6IEZldGNoZXMgZGF0YSB0byByZW5kZXIgZm9ybSBmaWVsZHMgYW5kIGVycm9yc1xuICAgIEItLT4-QTogRmlsbHMgb3V0IGZvcm1zIGFnYWluLCBjb3JyZWN0cyBlcnJvcnNcbiAgICBCLT4-SzogUE9TVHMgZGF0YSBhZ2FpbiAtIGFuZCBzbyBvbi4uLlxuICBlbmRcbiIsIm1lcm1haWQiOnsidGhlbWUiOiJuZXV0cmFsIiwic2VxdWVuY2VEaWFncmFtIjp7ImRpYWdyYW1NYXJnaW5YIjoxNSwiZGlhZ3JhbU1hcmdpblkiOjE1LCJib3hUZXh0TWFyZ2luIjowLCJub3RlTWFyZ2luIjoxNSwibWVzc2FnZU1hcmdpbiI6NDUsIm1pcnJvckFjdG9ycyI6dHJ1ZX19fQ" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Kratos to Hydra in CKAN Classic:</p> <p>WIP</p> <p>Questions</p> <ul><li>Does CKAN Classic allow us to store arbitrary account information (are there ‚Äúextras‚Äù)</li> <li>How would we avoid having to support identity persistence, delegation etc in both NG frontend and Classic Admin UI?
<ul><li>Can we share cookies (e.g. via using subdomains)</li></ul></li> <li>How is login, identity determination etc done at least for frontend in <a href="http://DataHub.io" target="_blank" rel="noopener noreferrer">DataHub.io<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Should account UI really be in NG frontend vs Classic Admin UI?</li> <li>how can we handle ‚Äúinvite a user‚Äù to my org set up ‚Ä¶ (it‚Äôs basically post processing after sign up ‚Ä¶)</li></ul> <h2 id="appendix"><a href="#appendix" class="header-anchor">#</a> Appendix</h2> <h3 id="more-job-stories"><a href="#more-job-stories" class="header-anchor">#</a> More job stories</h3> <p>When a user visits the data portal, I want to provide multiple options for him/her to sign up so that I have more users registered and using the data portal.</p> <p>When a user needs to change his/her profile info, I want to make sure it is possible, so that I have the up-to-date information about users.</p> <p>When my personal info (email etc.) is changed, I want to edit it in my profile so that I provide up-to-date information about me and I receive messages (eg, notifications) properly.</p> <p>When I decide to stop using the data portal, I want to be able to delete my account, so that my personal details aren‚Äôt stored in the service that I don‚Äôt need anymore.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/datopian/tech.datopian.com/edit/master/authentication/README.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Modified:</span> <span class="time">10/5/2020, 3:53:35 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.59a08162.js" defer></script><script src="/assets/js/3.d5d0a0d8.js" defer></script><script src="/assets/js/9.077580af.js" defer></script>
  </body>
</html>

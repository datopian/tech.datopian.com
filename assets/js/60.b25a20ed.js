(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{418:function(e,t,r){"use strict";r.r(t);var a=r(18),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"before-deployment"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#before-deployment"}},[e._v("#")]),e._v(" Before Deployment")]),e._v(" "),r("h2",{attrs:{id:"requirements"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),r("p",[e._v("General list of requirements to host and maintain the open data portal:")]),e._v(" "),r("ul",[r("li",[e._v("All appropriate security processes and practices for hosting publicly accessible applications on the Internet.")]),e._v(" "),r("li",[e._v("Ability to run recent versions of Ubuntu or Debian operating systems on virtual machines, including regular security and maintenance updates for the operating system.")]),e._v(" "),r("li",[e._v("Ability to deploy multiple machines for different purposes, for example a staging environment for testing changes to the open data portal, and a production environment which is publicly accessible.")]),e._v(" "),r("li",[e._v("Ability to upgrade production systems with CKAN updates over time, and also update supporting software (for example, SOLR for the search functionality, and PostgresQL which provides the database).")]),e._v(" "),r("li",[e._v("Processes and practices for regular deployment of code to production and staging servers.")]),e._v(" "),r("li",[e._v("Processes and practices for backup of code and data of the open data portal, including ability to restore the portal from backups in disaster events.")]),e._v(" "),r("li",[e._v("One developer with intermediate-to-expert knowledge of the Python programming language.")]),e._v(" "),r("li",[e._v("One system administrator with expert knowledge of linux system administration.")])]),e._v(" "),r("h2",{attrs:{id:"software-and-hardware-recommendations"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#software-and-hardware-recommendations"}},[e._v("#")]),e._v(" Software and Hardware recommendations")]),e._v(" "),r("h3",{attrs:{id:"preparation"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#preparation"}},[e._v("#")]),e._v(" Preparation")]),e._v(" "),r("p",[e._v("Prior to the deployment, the client should prepare the following:")]),e._v(" "),r("ul",[r("li",[e._v("If a cloud provider is selected as a deployment target, the client should have already created an account.\n"),r("ul",[r("li",[e._v("We can assist them with choosing the instance specs, in which case we should have access to their account as well.")]),e._v(" "),r("li",[e._v("Depending on the provider, this might involve them handing over their credentials for us to create server instances.")])])]),e._v(" "),r("li",[e._v("Access to their DNS settings\n"),r("ul",[r("li",[e._v("We might need to point a (sub)domain to one or more machines. The client should be able to amend their DNS configuration to the domains they want to point to the new machines.")]),e._v(" "),r("li",[e._v("We do not want or need their DNS provider credentials - this is a one time operation.")])])]),e._v(" "),r("li",[e._v("If the client have a preferred SSL provider, they should have already created accounts / certificates for the target (sub)domain. We only need the certificates, not the means to create / revoke them. In case they are fine with issuing Let’s Encrypt certificates, nothing would be needed from their side.")]),e._v(" "),r("li",[e._v("If the deployment involves connecting to external or 3rd party services (database systems, monitoring, backups etc.) we should have the credentials to set up the instance accordingly.")]),e._v(" "),r("li",[e._v("Last but not least, we will need SSH access to the deployment target machines.")])]),e._v(" "),r("h3",{attrs:{id:"checklist"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#checklist"}},[e._v("#")]),e._v(" Checklist")]),e._v(" "),r("p",[e._v("Checklist of items to take into account before deploying:")]),e._v(" "),r("table",[r("thead",[r("tr",[r("th",[e._v("Item")]),e._v(" "),r("th",[e._v("Details")])])]),e._v(" "),r("tbody",[r("tr",[r("td",[e._v("Understand the expected working point")]),e._v(" "),r("td",[e._v("Estimate "),r("br"),e._v(" load "),r("br"),e._v(" storage "),r("br"),e._v(" # of datasets "),r("br"),e._v(" # of users "),r("br"),e._v("Expected API usage (internal or external) "),r("br"),e._v(" "),r("br"),e._v(" Also if there are any: "),r("br"),e._v(" Security considerations "),r("br"),e._v(" Environmental considerations")])]),e._v(" "),r("tr",[r("td",[e._v("Set basic HW requirements")]),e._v(" "),r("td",[e._v("Decide what’s the best hardware configuration based on the client’s limitations. "),r("br"),e._v(" We recommend deployments to 1 server. If a deployment to setup with more than 1 server its needed, it can be done but it requires extra effort on both ends. "),r("br"),r("br"),e._v(" Ballpark figures for common hardware requirements: "),r("br"),e._v(" For a large national portal with heavy traffic: "),r("br"),e._v(" - Server with 16GB of RAM, 4 cores "),r("br"),e._v(" - 512GB attached storage (you may want to increase size if you intend to do a lot of file storage) "),r("br"),r("br"),e._v(" For a city level portal with lower traffic levels: "),r("br"),e._v(" - Server with 4GB of RAM, 2 cores "),r("br"),e._v(" - 256GB attached storage (you may want to increase size if you intend to do a lot of file storage)")])]),e._v(" "),r("tr",[r("td",[e._v("Collect existing peripheral systems")]),e._v(" "),r("td",[e._v("Understand which already existing systems the client already has for monitoring, logging, backup etc.")])]),e._v(" "),r("tr",[r("td",[e._v("Decide on architecture")]),e._v(" "),r("td",[e._v("Right now docker compose setup only.")])]),e._v(" "),r("tr",[r("td",[e._v("Make sure correct OS is used")]),e._v(" "),r("td",[e._v("Container optimized OS / Debian - or anything containing preinstalled docker with a high enough version.")])]),e._v(" "),r("tr",[r("td",[e._v("Set up network policy")]),e._v(" "),r("td",[e._v("Allow HTTP, HTTPS, SSH.")])]),e._v(" "),r("tr",[r("td",[e._v("Acquire DB credentials")]),e._v(" "),r("td",[e._v("(If client has and maintains own DB server:) "),r("br"),e._v(" We send them SQL commands to create the database and they provide us with credentials. "),r("br"),r("br"),e._v(" (If client has DB server:) "),r("br"),e._v(" They provide us with credentials and we use them to create DB. "),r("br"),r("br"),e._v("(Otherwise:) "),r("br"),e._v(" We set up dedicated DB inside cluster / using a cloud service (e.g. RDS).")])]),e._v(" "),r("tr",[r("td",[e._v("Installation via docker")]),e._v(" "),r("td",[e._v("(If we have ssh access:) "),r("br"),e._v(" We use docker with ssh credentials. "),r("br"),e._v(" (We have terminal access:) "),r("br"),e._v("Pull, build, run locally."),r("br"),e._v("(We have physical access, not Internet connectivity:)"),r("br"),e._v("Export / import docker images & run locally.")])]),e._v(" "),r("tr",[r("td",[e._v("Create Admin User")]),e._v(" "),r("td",[e._v("Instructions in docs.")])]),e._v(" "),r("tr",[r("td",[e._v("Connect domain")]),e._v(" "),r("td",[e._v("Modify DNS records.")])]),e._v(" "),r("tr",[r("td",[e._v("Set up SSL")]),e._v(" "),r("td",[e._v("(If client is ok with letsencrypt:) "),r("br"),e._v(" Use traefik to set it up. "),r("br"),e._v(" (If client has their own certificate:) "),r("br"),e._v("Install on traefik.")])]),e._v(" "),r("tr",[r("td",[e._v("Test")]),e._v(" "),r("td",[e._v("Common tests using automation tool."),r("br"),e._v("Specific tests to custom extensions."),r("br"),e._v("Acceptance tests as agreed upon with the client.")])]),e._v(" "),r("tr",[r("td",[e._v("Monitoring, logging and backup")]),e._v(" "),r("td",[e._v("Connect with local systems for monitoring, logging and backup. "),r("br"),r("br"),e._v("Set up our own solutions such as: "),r("br"),e._v("- Sentry"),r("br"),e._v("- TBD (need to create a list of ‘recommended providers’, in case the client doesn’t have own solution)"),r("br"),e._v("- Backups - we need to make sure to expose the correct volumes (TBD a list of which ones)")])])])]),e._v(" "),r("h2",{attrs:{id:"next-steps"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#next-steps"}},[e._v("#")]),e._v(" Next Steps")]),e._v(" "),r("p",[e._v("Read the "),r("a",{attrs:{href:"/migration/ccd/deployment"}},[e._v("Deployment Guide")])])])}),[],!1,null,null,null);t.default=o.exports}}]);
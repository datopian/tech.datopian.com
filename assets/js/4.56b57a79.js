(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{363:function(a,t,e){a.exports=e.p+"assets/img/data-explorer.fef5281a.png"},364:function(a,t,e){a.exports=e.p+"assets/img/datapackage-views.c59283e7.png"},365:function(a,t,e){a.exports=e.p+"assets/img/query-builder.edc56e76.png"},366:function(a,t,e){a.exports=e.p+"assets/img/map-builder.2d897cf1.png"},367:function(a,t,e){a.exports=e.p+"assets/img/chart-builder.24dd30b3.png"},368:function(a,t,e){a.exports=e.p+"assets/img/i18n-cookie.f5f60ffe.png"},430:function(a,t,e){"use strict";e.r(t);var s=e(25),r=Object(s.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"data-explorer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#data-explorer"}},[a._v("#")]),a._v(" Data Explorer")]),a._v(" "),s("p",[a._v("The Datopian Data Explorer is a React single page application and framework for creating and displaying rich data explorers (think Tableau-lite). Use stand-alone or with CKAN. For CKAN it is a drop-in replacement for ReclineJS in CKAN Classic.")]),a._v(" "),s("p",[s("img",{attrs:{src:e(363),alt:"Data Explorer"}})]),a._v(" "),s("blockquote",[s("p",[s("a",{attrs:{href:"http://montreal.ckan.io/ville-de-montreal/geobase-double#resource-G%C3%83%C2%A9obase%20double",target:"_blank",rel:"noopener noreferrer"}},[a._v("Data Explorer for the City of Montreal"),s("OutboundLink")],1)])]),a._v(" "),s("h2",{attrs:{id:"features-highlights"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#features-highlights"}},[a._v("#")]),a._v(" Features / Highlights")]),a._v(" "),s("p",[a._v("“Data Explorer” is an embedable React/Redux application that allows users to:")]),a._v(" "),s("ul",[s("li",[a._v("Explore tabular, map, PDF, and other types of data")]),a._v(" "),s("li",[a._v("Create map views of tabular data using the "),s("a",{attrs:{href:"#map-builder"}},[a._v("Map Builder")])]),a._v(" "),s("li",[a._v("Create charts and graphs of tabular data using "),s("a",{attrs:{href:"#chart-builder"}},[a._v("Chart Builder")])]),a._v(" "),s("li",[a._v("Easily build SQL queries for Data Store API using graphical interface of "),s("a",{attrs:{href:"#datastore-query-builder"}},[a._v("Datastore Query Builder")])])]),a._v(" "),s("h2",{attrs:{id:"components"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#components"}},[a._v("#")]),a._v(" Components")]),a._v(" "),s("p",[a._v("The Data Explorer application acts as a coordinating layer and state management solution – via "),s("a",{attrs:{href:"https://redux.js.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Redux"),s("OutboundLink")],1),a._v(" – for several libraries, also maintained by Datopian.")]),a._v(" "),s("h3",{attrs:{id:"datapackage-views"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#datapackage-views"}},[a._v("#")]),a._v(" "),s("a",{attrs:{href:"https://github.com/datopian/datapackage-views-js",target:"_blank",rel:"noopener noreferrer"}},[a._v("Datapackage Views"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("img",{attrs:{src:e(364),alt:"Datapackage Views"}})]),a._v(" "),s("p",[a._v("Datapackage View is the rendering engine for the main window of the Data Explorer.")]),a._v(" "),s("p",[a._v("The above image displays a table shown at the "),s("code",[a._v("Table")]),a._v(" tab, but note that Datapackage-views renders "),s("em",[a._v("all")]),a._v(" data visualizations: Tables, Charts, Maps, and others.")]),a._v(" "),s("h3",{attrs:{id:"datastore-query-builder"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#datastore-query-builder"}},[a._v("#")]),a._v(" "),s("a",{attrs:{href:"https://github.com/datopian/datastore-query-builder",target:"_blank",rel:"noopener noreferrer"}},[a._v("Datastore Query Builder"),s("OutboundLink")],1)]),a._v(" "),s("img",{attrs:{alt:"Datastore Query Builder",src:e(365),width:"250px"}}),a._v(" "),s("p",[a._v("The Datastore Query Builder interfaces with the Datastore API to allow users to search data resources using an SQL like interface. See the docs for this module here - "),s("RouterLink",{attrs:{to:"/data-explorer/datastore-query-builder/"}},[a._v("Datastore Query Builder docs")]),a._v(".")],1),a._v(" "),s("h3",{attrs:{id:"map-builder"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#map-builder"}},[a._v("#")]),a._v(" "),s("a",{attrs:{href:"https://github.com/datopian/map-builder",target:"_blank",rel:"noopener noreferrer"}},[a._v("Map Builder"),s("OutboundLink")],1)]),a._v(" "),s("img",{attrs:{alt:"Map Builder",src:e(366),width:"250px"}}),a._v(" "),s("p",[a._v("Map Builder allows users to build maps based on geo-data contained in tabular resources.")]),a._v(" "),s("p",[a._v("Supported geo formats:")]),a._v(" "),s("ul",[s("li",[a._v("lon / lat (separate columns)")])]),a._v(" "),s("h3",{attrs:{id:"chart-builder"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#chart-builder"}},[a._v("#")]),a._v(" "),s("a",{attrs:{href:"https://github.com/datopian/chart-builder",target:"_blank",rel:"noopener noreferrer"}},[a._v("Chart Builder"),s("OutboundLink")],1)]),a._v(" "),s("img",{attrs:{alt:"Chart Builder",src:e(367),width:"250px"}}),a._v(" "),s("p",[a._v("Chart Builder allows users to create charts and graphs from tabular data.")]),a._v(" "),s("h2",{attrs:{id:"quick-start-sandbox"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#quick-start-sandbox"}},[a._v("#")]),a._v(" Quick-start (Sandbox)")]),a._v(" "),s("ul",[s("li",[a._v("Clone the data explorer")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone git@gitlab.com:datopian/data-explorer.git\n")])])]),s("ul",[s("li",[a._v("Use yarn to install the project dependencies")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" data-explorer\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n")])])]),s("ul",[s("li",[a._v("To see the Data Explorer running in a sandbox environment run "),s("a",{attrs:{href:"https://github.com/react-cosmos/react-cosmos",target:"_blank",rel:"noopener noreferrer"}},[a._v("Cosmos"),s("OutboundLink")],1)])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" cosmos\n")])])]),s("h2",{attrs:{id:"configuration"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[a._v("#")]),a._v(" Configuration")]),a._v(" "),s("p",[s("a",{attrs:{href:"#add-data-explorer-tags-to-the-page-markup"}},[s("code",[a._v("data-datapackage")]),a._v(" attribute")]),a._v(" may influence how the element will be displayed. It can be created from a "),s("a",{attrs:{href:"https://frictionlessdata.io/specs/data-package/",target:"_blank",rel:"noopener noreferrer"}},[a._v("datapackage descriptor"),s("OutboundLink")],1),a._v(".")]),a._v(" "),s("h3",{attrs:{id:"fixtures"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fixtures"}},[a._v("#")]),a._v(" Fixtures")]),a._v(" "),s("p",[a._v("Until we have better documentation on Data Explorer settings, use the "),s("a",{attrs:{href:"https://gitlab.com/datopian/data-explorer/blob/master/__fixtures__/with_widgets/geojson_simple.js",target:"_blank",rel:"noopener noreferrer"}},[a._v("Cosmos fixtures"),s("OutboundLink")],1),a._v(" as an example of how to instantiate / configure the Data Explorer.")]),a._v(" "),s("h3",{attrs:{id:"serialized-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#serialized-state"}},[a._v("#")]),a._v(" Serialized state")]),a._v(" "),s("p",[s("code",[a._v("store->serializedState")]),a._v(" is a representation of the application state "),s("em",[a._v("without fetched data")]),s("br"),a._v("\nA data-explorer can be “hydrated” using the serialized state, it will refetch the data, and will render in the same state it was exported in")]),a._v(" "),s("h3",{attrs:{id:"share-links"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#share-links"}},[a._v("#")]),a._v(" Share links")]),a._v(" "),s("p",[a._v("Share links can be added in "),s("code",[a._v("datapakage.resources[0].api")]),a._v(" attribute.")]),a._v(" "),s("p",[a._v("There is common limit of up 2000 characters on URL strings. Our share links contain the entire application store tree, which is often larger than 2000 characters, in which the application state cannot be shared via URL. Thems the breaks.")]),a._v(" "),s("h2",{attrs:{id:"translations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#translations"}},[a._v("#")]),a._v(" Translations")]),a._v(" "),s("h3",{attrs:{id:"add-a-translation-to-data-explorer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add-a-translation-to-data-explorer"}},[a._v("#")]),a._v(" Add a Translation To Data Explorer")]),a._v(" "),s("p",[a._v("To add a translation to a new language to the data explorer you need to:")]),a._v(" "),s("ol",[s("li",[a._v("clone the repository you need to update")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone git@gitlab.com:datopian/data-explorer.git\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("go to "),s("code",[a._v("src/i18n/locales/")]),a._v(" folder")]),a._v(" "),s("li",[a._v("add a new sub-folder with locale name and the new language json file (e.g. "),s("code",[a._v("src/i18n/locales/ru/translation.json")]),a._v(")")]),a._v(" "),s("li",[a._v("add the new file to resources settings in "),s("code",[a._v("i18n.js")]),a._v(":"),s("br"),a._v(" "),s("code",[a._v("src/i18n/i18n.js")]),a._v(":")])]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" en "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./locales/en/translation.json'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" da "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./locales/da/translation.json'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" ru "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./locales/ru/translation.json'")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n      ru"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        translation"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n          "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./locales/ru/translation.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n          "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[a._v("create a merge request with the changes")])]),a._v(" "),s("h3",{attrs:{id:"add-a-translation-to-a-component"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add-a-translation-to-a-component"}},[a._v("#")]),a._v(" Add a translation To a Component")]),a._v(" "),s("p",[a._v("Some strings may come from a component, to add translation for them will require some extra steps, e.g. datapackage-views-js:")]),a._v(" "),s("ol",[s("li",[a._v("clone the repository")])]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("https://github.com/datopian/datapackage-views-js.git\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("go to "),s("code",[a._v("src/i18n/locales/")]),a._v(" folder")]),a._v(" "),s("li",[a._v("add a new sub-folder with locale name and the new language json file (e.g. "),s("code",[a._v("src/i18n/locales/ru/translation.json")]),a._v(")")]),a._v(" "),s("li",[a._v("add the new file to resources settings in "),s("code",[a._v("i18n.js")]),a._v(":"),s("br"),a._v(" "),s("code",[a._v("src/i18n/i18n.js")]),a._v(":")])]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" ru "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./locales/ru/translation.json'")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n    resources"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n      ru"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("translation"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" ru"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[a._v("create a pull request for datapackage-views-js")]),a._v(" "),s("li",[a._v("get the new datapackage-views-js version after merging (e.g. 1.3.0)")]),a._v(" "),s("li",[a._v("clone data-explorer")]),a._v(" "),s("li",[a._v("upgrade the data-explorer’s datapackage-views-js dependency with the new version:"),s("br"),a._v("\na. update package.json"),s("br"),a._v("\nb. run "),s("code",[a._v("yarn install")])]),a._v(" "),s("li",[a._v("add the component’s translations path to Data Explorer:")])]),a._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" en "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./locales/en/translation.json'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" da "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./locales/da/translation.json'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("import")]),a._v(" ru "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("from")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./locales/ru/translation.json'")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n      ru"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        translation"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n          "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'./locales/ru/translation.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n          "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'datapackage-views-js/src/i18n/locales/ru/translation.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("...")]),a._v("\n")])])]),s("ol",{attrs:{start:"10"}},[s("li",[a._v("create a merge request for data-explorer")])]),a._v(" "),s("h3",{attrs:{id:"testing-a-newly-added-language"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing-a-newly-added-language"}},[a._v("#")]),a._v(" Testing a Newly Added Language")]),a._v(" "),s("p",[a._v("To see your language changes in Data Explorer you can run "),s("code",[a._v("yarn start")]),a._v(" and change the language cookie of the page ("),s("code",[a._v("defaultLocale")]),a._v("):")]),a._v(" "),s("p",[s("img",{attrs:{src:e(368),alt:"i18n Cookie"}})]),a._v(" "),s("h3",{attrs:{id:"language-detection"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#language-detection"}},[a._v("#")]),a._v(" Language detection")]),a._v(" "),s("p",[a._v("Language detection rules are determined by "),s("code",[a._v("detection")]),a._v(" option in "),s("code",[a._v("src/i18n/i18n.js")]),a._v(" file. Please edit with care, as other projects may already depend on them.")]),a._v(" "),s("h2",{attrs:{id:"embedding-in-ckan-ng-theme"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#embedding-in-ckan-ng-theme"}},[a._v("#")]),a._v(" Embedding in CKAN NG Theme")]),a._v(" "),s("h3",{attrs:{id:"copy-bundle-files-to-theme-s-public-directory"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#copy-bundle-files-to-theme-s-public-directory"}},[a._v("#")]),a._v(" Copy bundle files to theme’s "),s("code",[a._v("public")]),a._v(" directory")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" data-explorer/build/static/js/*.js frontend-v2/themes/your_theme/public/js\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" data-explorer/build/static/js/*.map frontend-v2/themes/your_theme/public/js\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" data-explorer/build/static/css/* frontend-v2/themes/your_theme/public/css\n")])])]),s("h4",{attrs:{id:"note-on-app-bundles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#note-on-app-bundles"}},[a._v("#")]),a._v(" Note on app bundles")]),a._v(" "),s("p",[a._v("The bundled resources have a hash in the filename, for example "),s("code",[a._v("2.a3e71132.chunk.js")])]),a._v(" "),s("p",[a._v("During development it may be preferable to remove the hash from the file name to avoid having to update the script tag during iteration, for example")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(".a3e71132.chunk.js "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(".chunk.js\n")])])]),s("p",[a._v("A couple caveats:")]),a._v(" "),s("ul",[s("li",[a._v("The "),s("code",[a._v(".map")]),a._v(" file names should remain the same so that they are loaded properly")]),a._v(" "),s("li",[a._v("Browser cache may need to be invalidated manually to ensure that the latest script is loaded")])]),a._v(" "),s("h3",{attrs:{id:"require-data-explorer-resources-in-ng-theme-template"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#require-data-explorer-resources-in-ng-theme-template"}},[a._v("#")]),a._v(" Require Data Explorer resources in NG theme template")]),a._v(" "),s("p",[a._v("In "),s("code",[a._v("/themes/your-theme/views/your-template-wth-explplorer.html")])]),a._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- Everything before the content block goes here --\x3e")]),a._v("\n{% block content %}\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- Data Explorer CSS --\x3e")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("link")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("stylesheet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("text/css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("/static/css/main.chunk.css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("link")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("rel")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("stylesheet"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("text/css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("/static/css/2.chunk.css"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("\x3c!-- End Data Explorer CSS --\x3e")]),a._v("\n")])])]),s("h3",{attrs:{id:"configure-datapackage"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configure-datapackage"}},[a._v("#")]),a._v(" Configure datapackage")]),a._v(" "),s("div",{staticClass:"language-htmlmixed= extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("\x3c!-- where datapackage is --\x3e\n<srcipt>\n  const datapackage = {\n    resources: [{resource}], // single resource for this view\n    views: [...], // can be 3 views aka widgets\n    controls: { \n      showChartBuilder: true,\n      showMapBuilder: true \n    }\n  }\n</srcipt>\n")])])]),s("h3",{attrs:{id:"add-data-explorer-tags-to-the-page-markup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add-data-explorer-tags-to-the-page-markup"}},[a._v("#")]),a._v(" Add data-explorer tags to the page markup")]),a._v(" "),s("p",[a._v("Each Data Explorer instance needs a corresponding "),s("code",[a._v("<div>")]),a._v(" in the DOM. For example:")]),a._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[a._v("{% for resource in dataset.resources %}\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("div")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("data-explorer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("id")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("data-explorer-{{ loop.index - 1 }}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("data-datapackage")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("'")]),a._v("{{ dataset.dataExplorers[loop.index - 1] | safe}}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("'")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n{% endfor %}\n")])])]),s("p",[a._v("Note that each container div needs the following attributes:")]),a._v(" "),s("ul",[s("li",[s("code",[a._v('class="data-explorer"')]),a._v(" (All explorer divs should have this class)")]),a._v(" "),s("li",[s("code",[a._v('id="data-explorer-0"')]),a._v(" (1, 2, etc…)")]),a._v(" "),s("li",[s("code",[a._v("data-datapackage=")]),a._v("{JSON CONFIG}` (A valid JSON configuration)")])]),a._v(" "),s("h3",{attrs:{id:"add-data-explorer-scripts-to-your-template"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add-data-explorer-scripts-to-your-template"}},[a._v("#")]),a._v(" Add data explorer scripts to your template")]),a._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("script")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("text/javascript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("/static/js/runtime~main.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("script")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("text/javascript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("/static/js/2.chunk.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("<")]),a._v("script")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("type")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("text/javascript"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')]),a._v("/static/js/main.chunk.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("</")]),a._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(">")])]),a._v("\n")])])]),s("p",[s("em",[a._v("NOTE")]),a._v(" that the scripts should be loaded "),s("em",[a._v("after the container divs are in the DOM, typically by placing the "),s("code",[a._v("<script>")]),a._v(" tags at the bottom of the footer")])]),a._v(" "),s("p",[a._v("See "),s("a",{attrs:{href:"https://gitlab.com/datopian/clients/ckan-montreal/blob/master/views/showcase.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("a real-world example here"),s("OutboundLink")],1)]),a._v(" "),s("h2",{attrs:{id:"new-builds"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#new-builds"}},[a._v("#")]),a._v(" New builds")]),a._v(" "),s("p",[a._v("In order to build files for production, run "),s("code",[a._v("npm run build")]),a._v(" or "),s("code",[a._v("yarn build")]),a._v(".")]),a._v(" "),s("p",[a._v("You need to have "),s("strong",[a._v("node version >= 12")]),a._v(" in order to build files. Otherwise a ‘heap out of memory error’ gets thrown.")]),a._v(" "),s("h3",{attrs:{id:"component-changes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#component-changes"}},[a._v("#")]),a._v(" Component changes")]),a._v(" "),s("p",[a._v("If the changes involve component updates that live in separate repositories make sure to upgrade them too before building:")]),a._v(" "),s("ol",[s("li",[a._v("Prepare the component with dist version (eg run yarn build:package in the component repo, see "),s("a",{attrs:{href:"https://tech.datopian.com/data-explorer/datastore-query-builder/#release",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://tech.datopian.com/data-explorer/datastore-query-builder/#release"),s("OutboundLink")],1),a._v(" for an example)")]),a._v(" "),s("li",[a._v("run "),s("code",[a._v("yarn add <package>")]),a._v(" to get latest changes, e.g. "),s("code",[a._v("yarn add @datopian/datastore-query-builder")]),a._v(" (do not use "),s("code",[a._v("yarn upgrade")]),a._v(", see here on why "),s("a",{attrs:{href:"https://github.com/datopian/data-explorer/issues/28#issuecomment-700792966",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://github.com/datopian/data-explorer/issues/28#issuecomment-700792966"),s("OutboundLink")],1),a._v(")")]),a._v(" "),s("li",[a._v("you can verify changes in "),s("code",[a._v("yarn.lock")]),a._v(" - there should be the latest component commit id")]),a._v(" "),s("li",[s("code",[a._v("yarn build")]),a._v(" in data-explorer")])]),a._v(" "),s("h3",{attrs:{id:"testing-not-yet-released-component-changes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing-not-yet-released-component-changes"}},[a._v("#")]),a._v(" Testing not yet released component changes")]),a._v(" "),s("p",[a._v("If there are some changes to be tested that are not ready to be released in a component the best option is to use"),s("br"),a._v("\ncosmos directly in the component repository, but if that is not enough you can add the dependency from a branch"),s("br"),a._v("\ntemporarily:")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yarn add https://github.com/datopian/datastore-query-builder.git#<branch name>\n")])])]),s("h2",{attrs:{id:"appendix-design"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#appendix-design"}},[a._v("#")]),a._v(" Appendix: Design")]),a._v(" "),s("p",[a._v("See "),s("RouterLink",{attrs:{to:"/data-explorer/design/"}},[a._v("Data Explorer Design page »")])],1)])}),[],!1,null,null,null);t.default=r.exports}}]);